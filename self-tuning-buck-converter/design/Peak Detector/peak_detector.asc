Version 4
SHEET 1 1220 1164
WIRE -1248 -144 -1392 -144
WIRE -1472 -128 -1472 -160
WIRE -1072 -112 -1072 -144
WIRE -1392 -64 -1392 -144
WIRE -1376 -64 -1392 -64
WIRE -1248 -48 -1248 -144
WIRE -1248 -48 -1312 -48
WIRE -1216 -48 -1248 -48
WIRE -1472 -32 -1472 -48
WIRE -1376 -32 -1472 -32
WIRE 256 -32 80 -32
WIRE 400 -32 256 -32
WIRE 640 -32 480 -32
WIRE 848 -32 640 -32
WIRE -1472 -16 -1472 -32
WIRE -1344 0 -1344 -16
WIRE 256 0 256 -32
WIRE -1600 16 -1600 0
WIRE 0 32 -128 32
WIRE -1472 80 -1472 64
WIRE 640 96 640 -32
WIRE 672 96 640 96
WIRE 80 112 80 -32
WIRE 112 112 80 112
WIRE 848 112 848 -32
WIRE 848 112 736 112
WIRE 928 112 848 112
WIRE -1072 128 -1072 96
WIRE -128 128 -128 32
WIRE -112 128 -128 128
WIRE 256 128 256 64
WIRE 256 128 176 128
WIRE 320 128 256 128
WIRE 496 128 384 128
WIRE 624 128 576 128
WIRE 672 128 624 128
WIRE 0 144 0 32
WIRE 0 144 -48 144
WIRE 112 144 0 144
WIRE -288 160 -288 96
WIRE -288 160 -320 160
WIRE -112 160 -288 160
WIRE 624 160 624 128
WIRE 704 160 704 144
WIRE 144 176 144 160
WIRE -80 192 -80 176
WIRE 624 256 624 224
FLAG -1600 16 0
FLAG -1600 -80 VCC
FLAG -1072 128 0
FLAG -1072 16 ripple
FLAG -1472 -160 VCC
FLAG -1472 80 0
FLAG -1216 -48 V_ref
FLAG -1344 -80 VCC
FLAG -1344 0 0
FLAG -1072 -112 0
FLAG -1072 -224 ripple_1
FLAG -384 160 ripple
FLAG -288 16 V_ref
FLAG -80 112 VCC
FLAG -80 192 0
FLAG 144 96 VCC
FLAG 144 176 0
FLAG 704 80 VCC
FLAG 704 160 0
FLAG 624 256 0
SYMBOL voltage -1600 -96 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V1
SYMATTR Value 12
SYMBOL voltage -1072 0 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V2
SYMATTR Value SINE(0 0.4 100k 0 0 0)
SYMBOL res -1488 -144 R0
SYMATTR InstName R4
SYMATTR Value 10k
SYMBOL res -1488 -32 R0
SYMATTR InstName R5
SYMATTR Value 10k
SYMBOL Opamps\\OP27 -1344 -112 R0
SYMATTR InstName U4
SYMBOL voltage -1072 -240 R0
WINDOW 3 37 97 Left 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR Value PULSE(-0.4 0.4 0 0.002m 0.008m 1e-10 0.01m)
SYMATTR InstName V3
SYMBOL cap -320 144 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C3
SYMATTR Value 1n
SYMBOL res -304 0 R0
SYMATTR InstName R3
SYMATTR Value 1Meg
SYMBOL Opamps\\OP27 -80 80 R0
SYMATTR InstName U5
SYMBOL diode 320 144 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D3
SYMATTR Value 1N4148
SYMBOL diode 240 0 R0
SYMATTR InstName D4
SYMATTR Value 1N4148
SYMBOL res 592 112 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R6
SYMATTR Value 10k
SYMBOL res 496 -48 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R7
SYMATTR Value 10k
SYMBOL Opamps\\OP27 144 64 R0
SYMATTR InstName U6
SYMBOL Opamps\\OP27 704 48 R0
SYMATTR InstName U7
SYMBOL cap 608 160 R0
SYMATTR InstName C4
SYMATTR Value 10n
TEXT 592 -248 Left 2 !.tran 0 0.104s 0.102s 0.02
