Version 4
SHEET 1 880 1712
WIRE -2304 64 -2304 32
WIRE -2080 80 -2208 80
WIRE -2144 144 -2144 128
WIRE -2208 160 -2208 80
WIRE -2176 160 -2208 160
WIRE -2080 176 -2080 80
WIRE -2080 176 -2112 176
WIRE -2048 176 -2080 176
WIRE -2304 192 -2304 144
WIRE -2176 192 -2304 192
WIRE -2752 224 -2752 208
WIRE -2304 224 -2304 192
WIRE -2144 224 -2144 208
WIRE -2944 272 -2944 256
WIRE -880 272 -1040 272
WIRE -1472 320 -1776 320
WIRE -2752 336 -2752 304
WIRE -2304 336 -2304 304
WIRE -2944 368 -2944 352
WIRE -960 384 -960 368
WIRE -1712 400 -1712 384
WIRE -1040 400 -1040 272
WIRE -992 400 -1040 400
WIRE -1776 416 -1776 320
WIRE -1744 416 -1776 416
WIRE -880 416 -880 272
WIRE -880 416 -928 416
WIRE -864 416 -880 416
WIRE -1568 432 -1680 432
WIRE -1472 432 -1472 320
WIRE -1472 432 -1504 432
WIRE -1408 432 -1472 432
WIRE -1296 432 -1328 432
WIRE -1232 432 -1296 432
WIRE -1104 432 -1232 432
WIRE -992 432 -1104 432
WIRE -2016 448 -2064 448
WIRE -1920 448 -1920 400
WIRE -1920 448 -1952 448
WIRE -1744 448 -1920 448
WIRE -1232 448 -1232 432
WIRE -1104 448 -1104 432
WIRE -2752 464 -2752 416
WIRE -960 464 -960 448
WIRE -1712 480 -1712 464
WIRE -1232 544 -1232 512
WIRE -1104 544 -1104 528
WIRE -1296 576 -1296 432
WIRE -1344 656 -1472 656
WIRE -1472 704 -1472 656
WIRE -1296 720 -1296 672
WIRE -1472 816 -1472 784
FLAG -2752 208 IN
FLAG -1712 480 0
FLAG -1712 384 +V
FLAG -1232 544 0
FLAG -960 464 0
FLAG -864 416 OUT
FLAG -2944 368 0
FLAG -960 368 +V
FLAG -1472 816 0
FLAG -2944 256 +V
FLAG -2752 464 0
FLAG -2304 336 0
FLAG -2048 176 V_ref
FLAG -2144 224 0
FLAG -2144 128 +V
FLAG -2304 32 +V
FLAG -2064 448 IN
FLAG -1920 320 V_ref
FLAG -1296 720 0
FLAG -1104 544 0
SYMBOL voltage -2752 320 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V1
SYMATTR Value SINE(0 0.5 10K 80u 0 0 3)
SYMBOL voltage -2752 208 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V2
SYMATTR Value SINE(0 0.3 100k 500u 0 0 30)
SYMBOL cap -1248 448 R0
SYMATTR InstName C1
SYMATTR Value 100n
SYMBOL schottky -1568 448 R270
WINDOW 0 32 32 VTop 2
WINDOW 3 0 32 VBottom 2
SYMATTR InstName D2
SYMATTR Value 5082-2804
SYMATTR Description Diode
SYMATTR Type diode
SYMBOL voltage -2944 256 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V3
SYMATTR Value 5
SYMBOL voltage -1472 688 R0
WINDOW 123 0 0 Left 2
WINDOW 39 0 0 Left 2
SYMATTR InstName V5
SYMATTR Value PULSE(0 5 450u 1e-9 1e-9 100u 1 1)
SYMBOL nmos -1344 576 R0
SYMATTR InstName M1
SYMBOL res -1312 416 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R2
SYMATTR Value 10
SYMBOL res -2320 48 R0
SYMATTR InstName R3
SYMATTR Value 100k
SYMBOL res -2320 208 R0
SYMATTR InstName R9
SYMATTR Value 100k
SYMBOL cap -1952 432 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C3
SYMATTR Value 4.7µ
SYMBOL res -1936 304 R0
SYMATTR InstName R10
SYMATTR Value 1k
SYMBOL Opamps\\opamp2 -1712 368 R0
SYMATTR InstName U3
SYMATTR Value LM6152A/NS
SYMBOL res -1120 432 R0
SYMATTR InstName R1
SYMATTR Value 1Meg
SYMBOL Opamps\\LTC6244 -2144 176 R0
SYMATTR InstName U1
SYMBOL Opamps\\LTC6244 -960 416 R0
SYMATTR InstName U2
TEXT -3168 -368 Left 2 !.model 5082-2804 D(Is=22n Rs=25 N=1.08 Cjo=1.6p M=0.5 Eg=.69 Xti=2 Iave=100m Vpk=75 mfg=Avago type=Schottky)
TEXT -2936 48 Left 2 !.tran 0 2m 0 0.000001
TEXT -1784 120 Left 2 !.include lib/LMH6658.lib
TEXT -1784 88 Left 2 !.include lib/LM6152A.MOD
