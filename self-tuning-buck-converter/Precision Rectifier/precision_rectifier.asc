Version 4
SHEET 1 1220 1164
WIRE -1248 -144 -1392 -144
WIRE -1472 -128 -1472 -160
WIRE -1072 -112 -1072 -144
WIRE -352 -96 -352 -144
WIRE 560 -96 384 -96
WIRE -128 -80 -240 -80
WIRE 64 -80 -48 -80
WIRE -1392 -64 -1392 -144
WIRE -1376 -64 -1392 -64
WIRE -1248 -48 -1248 -144
WIRE -1248 -48 -1312 -48
WIRE -1216 -48 -1248 -48
WIRE -1472 -32 -1472 -48
WIRE -1376 -32 -1472 -32
WIRE -1472 -16 -1472 -32
WIRE -1344 0 -1344 -16
WIRE 384 0 384 -96
WIRE 416 0 384 0
WIRE -1600 16 -1600 0
WIRE -240 16 -240 -80
WIRE -224 16 -240 16
WIRE 560 16 560 -96
WIRE 560 16 480 16
WIRE -48 32 -160 32
WIRE 64 32 64 -80
WIRE 64 32 16 32
WIRE 96 32 64 32
WIRE 240 32 176 32
WIRE 336 32 240 32
WIRE 416 32 336 32
WIRE -352 48 -352 -16
WIRE -352 48 -384 48
WIRE -320 48 -352 48
WIRE -224 48 -320 48
WIRE 240 48 240 32
WIRE 336 48 336 32
WIRE 448 64 448 48
WIRE -1472 80 -1472 64
WIRE -192 80 -192 64
WIRE 240 144 240 112
WIRE 336 144 336 128
WIRE 272 304 256 304
WIRE 272 320 272 304
WIRE 80 400 -32 400
WIRE 240 400 160 400
WIRE -608 416 -608 368
WIRE 272 416 272 400
WIRE 288 416 272 416
WIRE 320 416 288 416
WIRE 448 416 400 416
WIRE -352 448 -496 448
WIRE -496 528 -496 448
WIRE -480 528 -496 528
WIRE 288 528 288 416
WIRE 320 528 288 528
WIRE -352 544 -352 448
WIRE -352 544 -416 544
WIRE -304 544 -352 544
WIRE -208 544 -304 544
WIRE -32 544 -32 400
WIRE -32 544 -128 544
WIRE 80 544 -32 544
WIRE 448 544 448 416
WIRE 448 544 384 544
WIRE 496 544 448 544
WIRE 624 544 576 544
WIRE 672 544 624 544
WIRE -608 560 -608 496
WIRE -608 560 -640 560
WIRE -480 560 -608 560
WIRE 240 560 240 400
WIRE 240 560 144 560
WIRE 320 560 240 560
WIRE 80 576 32 576
WIRE -448 592 -448 576
WIRE -304 592 -304 544
WIRE -32 592 -32 544
WIRE 352 592 352 576
WIRE 624 592 624 544
WIRE 112 608 112 592
WIRE 32 624 32 576
WIRE 624 672 624 656
WIRE -304 704 -304 672
WIRE -208 704 -304 704
WIRE -32 704 -32 672
WIRE -32 704 -128 704
WIRE -32 736 -32 704
WIRE -304 832 -304 704
WIRE -192 832 -304 832
WIRE -32 832 -32 800
WIRE -32 832 -128 832
WIRE -304 976 -304 832
WIRE -192 976 -304 976
WIRE -32 992 -32 832
WIRE -32 992 -128 992
WIRE -192 1008 -240 1008
WIRE -160 1040 -160 1024
WIRE -240 1056 -240 1008
FLAG -1600 16 0
FLAG -1600 -80 VCC
FLAG -1472 -160 VCC
FLAG -1472 80 0
FLAG -1216 -48 V_ref
FLAG -192 0 VCC
FLAG -192 80 0
FLAG -1344 -80 VCC
FLAG -1344 0 0
FLAG -1072 -112 0
FLAG -1072 -224 ripple_1
FLAG -352 -144 V_ref
FLAG -608 368 V_ref
FLAG -704 560 ripple_1
FLAG -160 960 VCC
FLAG -160 1040 0
FLAG 112 528 VCC
FLAG 112 608 0
FLAG 352 512 VCC
FLAG 352 592 0
FLAG 624 672 0
FLAG -448 512 VCC
FLAG -448 592 0
FLAG -240 1056 V_ref
FLAG 32 624 V_ref
FLAG -448 48 ripple_1
FLAG 256 304 V_ref
FLAG 240 144 0
FLAG 448 -16 VCC
FLAG 448 64 0
FLAG 336 144 0
FLAG 672 544 Precision_Rectifier
FLAG 560 -96 Sample_and_hold
FLAG -320 48 V_ripple
SYMBOL voltage -1600 -96 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName V1
SYMATTR Value 12
SYMBOL res -1488 -144 R0
SYMATTR InstName R4
SYMATTR Value 10k
SYMBOL res -1488 -32 R0
SYMATTR InstName R5
SYMATTR Value 10k
SYMBOL Opamps\\OP27 -1344 -112 R0
SYMATTR InstName U4
SYMBOL voltage -1072 -240 R0
WINDOW 3 37 97 Left 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR Value PULSE(0 1 0 0.002m 0.008m 1e-10 0.01m)
SYMATTR InstName V3
SYMBOL cap -384 32 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C3
SYMATTR Value 1n
SYMBOL res -368 -112 R0
SYMATTR InstName R8
SYMATTR Value 1Meg
SYMBOL cap -640 544 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C6
SYMATTR Value 1n
SYMBOL res -624 400 R0
SYMATTR InstName R10
SYMATTR Value 1Meg
SYMBOL res -112 528 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R11
SYMATTR Value 1k
SYMBOL res -112 688 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R12
SYMATTR Value 1k
SYMBOL res -288 688 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R13
SYMATTR Value 1k
SYMBOL res -16 688 R180
WINDOW 0 36 76 Left 2
WINDOW 3 36 40 Left 2
SYMATTR InstName R14
SYMATTR Value 500
SYMBOL diode -48 736 R0
WINDOW 3 35 67 Left 2
SYMATTR Value 1N4148
SYMATTR InstName D1
SYMBOL diode -128 816 R90
WINDOW 3 32 32 VTop 2
WINDOW 0 0 32 VBottom 2
SYMATTR Value 1N4148
SYMATTR InstName D4
SYMBOL res 176 384 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R15
SYMATTR Value 1k
SYMBOL res 592 528 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R16
SYMATTR Value 16k
SYMBOL cap 608 592 R0
SYMATTR InstName C7
SYMATTR Value 1µ
SYMBOL OpAmps\\LTC6244 -192 32 R0
SYMATTR InstName U9
SYMBOL OpAmps\\LTC6244 -448 544 R0
SYMATTR InstName U3
SYMBOL OpAmps\\LTC6244 112 560 R0
SYMATTR InstName U6
SYMBOL OpAmps\\LTC6244 352 544 R0
SYMATTR InstName U7
SYMBOL OpAmps\\LTC6244 -160 992 R0
SYMATTR InstName U5
SYMBOL res 304 432 R270
WINDOW 0 32 56 VTop 2
WINDOW 3 0 56 VBottom 2
SYMATTR InstName R3
SYMATTR Value 1k
SYMBOL res 256 304 R0
SYMATTR InstName R9
SYMATTR Value 1k
SYMBOL diode -48 48 R270
WINDOW 3 0 32 VBottom 2
WINDOW 0 32 32 VTop 2
SYMATTR Value 1N4148
SYMATTR InstName D2
SYMBOL res 192 16 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R1
SYMATTR Value 10
SYMBOL cap 224 48 R0
SYMATTR InstName C1
SYMATTR Value 100n
SYMBOL OpAmps\\LTC6244 448 16 R0
SYMATTR InstName U1
SYMBOL res 320 32 R0
SYMATTR InstName R2
SYMATTR Value 820k
SYMBOL res -32 -96 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R6
SYMATTR Value 10k
TEXT 592 -248 Left 2 !.tran 0 0.0504s 0.0502s 0.02
