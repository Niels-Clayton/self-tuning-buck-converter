Version 4
SHEET 1 2212 792
WIRE 192 -80 144 -80
WIRE 320 -80 272 -80
WIRE 144 16 144 -80
WIRE 192 16 144 16
WIRE 320 16 320 -80
WIRE 320 16 256 16
WIRE 16 144 -112 144
WIRE 144 144 144 16
WIRE 144 144 96 144
WIRE 192 144 144 144
WIRE 320 160 320 16
WIRE 320 160 256 160
WIRE 480 160 320 160
WIRE 192 176 160 176
WIRE 144 384 144 352
WIRE 144 416 144 384
FLAG -80 432 0
FLAG 32 432 0
FLAG 32 352 V+
FLAG 224 128 V+
FLAG 144 496 0
FLAG 144 272 V+
FLAG 144 384 vref
FLAG 224 192 0
FLAG 160 176 vref
FLAG -80 352 Vin
IOPIN -80 352 In
FLAG 480 160 Vout
IOPIN 480 160 Out
FLAG -112 144 Vin
IOPIN -112 144 In
SYMBOL res 112 128 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R1
SYMATTR Value 100k
SYMBOL res 288 -96 R90
WINDOW 0 0 56 VBottom 2
WINDOW 3 32 56 VTop 2
SYMATTR InstName R2
SYMATTR Value 100Meg
SYMBOL cap 256 0 R90
WINDOW 0 0 32 VBottom 2
WINDOW 3 32 32 VTop 2
SYMATTR InstName C1
SYMATTR Value 1.59n
SYMBOL voltage -80 336 M0
WINDOW 0 -46 130 VLeft 2
WINDOW 3 -716 -369 Bottom 2
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
SYMATTR InstName PWM_Source
SYMATTR Value PULSE(2 3 0 0.1u 0.1u {period/2} {period})
SYMBOL voltage 32 336 R0
WINDOW 123 0 0 Left 0
WINDOW 39 0 0 Left 0
WINDOW 3 29 85 Left 2
SYMATTR Value 5
SYMATTR InstName VCC
SYMBOL Opamps\\UniversalOpamp2 224 160 R0
SYMATTR InstName U2
SYMBOL res 128 256 R0
SYMATTR InstName R3
SYMATTR Value 10k
SYMBOL res 128 400 R0
SYMATTR InstName R4
SYMATTR Value 10k
TEXT 424 -128 Left 2 !.param period=1/100k
TEXT 424 -88 Left 2 !.tran 0 {period*1000} {period*990} {period/100}
