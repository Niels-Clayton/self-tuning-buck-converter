EESchema Schematic File Version 4
EELAYER 30 0
EELAYER END
$Descr A4 11693 8268
encoding utf-8
Sheet 1 1
Title ""
Date ""
Rev ""
Comp ""
Comment1 ""
Comment2 ""
Comment3 ""
Comment4 ""
$EndDescr
$Comp
L ESP32-DEVKITC-32D:ESP32-DEVKITC-32D U4
U 1 1 6135B32C
P 10000 5400
F 0 "U4" H 10000 6567 50  0000 C CNN
F 1 "ESP32-DEVKITC-32D" H 10000 6476 50  0000 C CNN
F 2 "MODULE_ESP32-DEVKITC-32D:MODULE_ESP32-DEVKITC-32D" H 10000 5400 50  0001 L BNN
F 3 "" H 10000 5400 50  0001 L BNN
F 4 "Espressif Systems" H 10000 5400 50  0001 L BNN "MANUFACTURER"
F 5 "4" H 10000 5400 50  0001 L BNN "PARTREV"
	1    10000 5400
	1    0    0    -1  
$EndComp
Wire Wire Line
	10800 4500 11050 4500
$Comp
L power:GNDD #PWR0101
U 1 1 613620C9
P 11050 5150
F 0 "#PWR0101" H 11050 4900 50  0001 C CNN
F 1 "GNDD" H 11054 4995 50  0000 C CNN
F 2 "" H 11050 5150 50  0001 C CNN
F 3 "" H 11050 5150 50  0001 C CNN
	1    11050 5150
	1    0    0    -1  
$EndComp
Wire Wire Line
	10800 5100 11050 5100
Wire Wire Line
	11050 5100 11050 5150
$Comp
L power:GNDD #PWR0102
U 1 1 61364069
P 8950 5850
F 0 "#PWR0102" H 8950 5600 50  0001 C CNN
F 1 "GNDD" H 8954 5695 50  0000 C CNN
F 2 "" H 8950 5850 50  0001 C CNN
F 3 "" H 8950 5850 50  0001 C CNN
	1    8950 5850
	1    0    0    -1  
$EndComp
Wire Wire Line
	8950 5850 8950 5800
Wire Wire Line
	8950 5800 9200 5800
NoConn ~ 9200 4500
NoConn ~ 9200 4600
NoConn ~ 9200 6300
Text GLabel 9075 4800 0    50   Input ~ 0
V_supply
NoConn ~ 9200 4900
NoConn ~ 9200 5000
NoConn ~ 9200 5100
NoConn ~ 9200 5200
NoConn ~ 9200 5300
NoConn ~ 9200 5400
NoConn ~ 9200 5600
NoConn ~ 9200 5700
NoConn ~ 9200 5900
NoConn ~ 9200 6000
NoConn ~ 9200 6100
NoConn ~ 9200 6200
NoConn ~ 10800 6300
NoConn ~ 10800 6200
NoConn ~ 10800 6100
NoConn ~ 10800 6000
NoConn ~ 10800 5900
NoConn ~ 10800 5800
NoConn ~ 10800 5700
NoConn ~ 10800 5600
NoConn ~ 10800 5500
NoConn ~ 10800 5400
NoConn ~ 10800 5300
NoConn ~ 10800 5200
NoConn ~ 10800 5000
NoConn ~ 10800 4900
NoConn ~ 10800 4800
NoConn ~ 10800 4700
NoConn ~ 10800 4600
$Comp
L power:+12V #PWR0103
U 1 1 6136E82D
P 5825 1200
F 0 "#PWR0103" H 5825 1050 50  0001 C CNN
F 1 "+12V" H 5840 1373 50  0000 C CNN
F 2 "" H 5825 1200 50  0001 C CNN
F 3 "" H 5825 1200 50  0001 C CNN
	1    5825 1200
	1    0    0    -1  
$EndComp
$Comp
L Device:Q_NMOS_GDS Q1
U 1 1 61370C87
P 5725 1550
F 0 "Q1" H 5929 1596 50  0000 L CNN
F 1 "NMOS" H 5929 1505 50  0000 L CNN
F 2 "" H 5925 1650 50  0001 C CNN
F 3 "~" H 5725 1550 50  0001 C CNN
	1    5725 1550
	1    0    0    -1  
$EndComp
Wire Wire Line
	5825 1200 5825 1350
$Comp
L Device:D_Schottky D2
U 1 1 61372223
P 5825 2150
F 0 "D2" V 5779 2230 50  0000 L CNN
F 1 "D_Schottky" V 5870 2230 50  0000 L CNN
F 2 "" H 5825 2150 50  0001 C CNN
F 3 "~" H 5825 2150 50  0001 C CNN
	1    5825 2150
	0    1    1    0   
$EndComp
$Comp
L power:GND #PWR0104
U 1 1 613736F3
P 5825 2425
F 0 "#PWR0104" H 5825 2175 50  0001 C CNN
F 1 "GND" H 5830 2252 50  0000 C CNN
F 2 "" H 5825 2425 50  0001 C CNN
F 3 "" H 5825 2425 50  0001 C CNN
	1    5825 2425
	1    0    0    -1  
$EndComp
$Comp
L Device:L L1
U 1 1 61375946
P 6125 1950
F 0 "L1" V 6315 1950 50  0000 C CNN
F 1 "L" V 6224 1950 50  0000 C CNN
F 2 "" H 6125 1950 50  0001 C CNN
F 3 "~" H 6125 1950 50  0001 C CNN
	1    6125 1950
	0    -1   -1   0   
$EndComp
Wire Wire Line
	5975 1950 5825 1950
Wire Wire Line
	5825 1950 5825 2000
Wire Wire Line
	6800 1950 6800 2000
Wire Wire Line
	6800 2300 6800 2375
$Comp
L Device:R R3
U 1 1 61379310
P 7175 2150
F 0 "R3" H 7245 2196 50  0000 L CNN
F 1 "10 20W" H 7245 2105 50  0000 L CNN
F 2 "" V 7105 2150 50  0001 C CNN
F 3 "~" H 7175 2150 50  0001 C CNN
	1    7175 2150
	1    0    0    -1  
$EndComp
Wire Wire Line
	6800 1950 7175 1950
Wire Wire Line
	7175 1950 7175 2000
Connection ~ 6800 1950
Wire Wire Line
	7175 2300 7175 2375
Wire Wire Line
	7175 2375 6800 2375
Connection ~ 6800 2375
Text GLabel 7275 1950 2    50   Input ~ 0
V_load
Wire Wire Line
	7275 1950 7175 1950
Connection ~ 7175 1950
$Comp
L Device:R_Small R6
U 1 1 6137AA0B
P 7725 5550
F 0 "R6" H 7784 5596 50  0000 L CNN
F 1 "56k" H 7784 5505 50  0000 L CNN
F 2 "" H 7725 5550 50  0001 C CNN
F 3 "~" H 7725 5550 50  0001 C CNN
	1    7725 5550
	1    0    0    -1  
$EndComp
Wire Wire Line
	7725 5325 7725 5450
$Comp
L Device:R_Small R7
U 1 1 6137C4E4
P 7725 5950
F 0 "R7" H 7784 5996 50  0000 L CNN
F 1 "22k" H 7784 5905 50  0000 L CNN
F 2 "" H 7725 5950 50  0001 C CNN
F 3 "~" H 7725 5950 50  0001 C CNN
	1    7725 5950
	1    0    0    -1  
$EndComp
$Comp
L power:GND #PWR0105
U 1 1 6137CD28
P 7725 6150
F 0 "#PWR0105" H 7725 5900 50  0001 C CNN
F 1 "GND" H 7730 5977 50  0000 C CNN
F 2 "" H 7725 6150 50  0001 C CNN
F 3 "" H 7725 6150 50  0001 C CNN
	1    7725 6150
	1    0    0    -1  
$EndComp
$Comp
L Device:R_Small R4
U 1 1 6137E635
P 6725 5550
F 0 "R4" H 6784 5596 50  0000 L CNN
F 1 "560k" H 6784 5505 50  0000 L CNN
F 2 "" H 6725 5550 50  0001 C CNN
F 3 "~" H 6725 5550 50  0001 C CNN
	1    6725 5550
	1    0    0    -1  
$EndComp
Wire Wire Line
	6725 5325 6725 5450
Wire Wire Line
	6725 5650 6725 5750
$Comp
L power:GND #PWR0106
U 1 1 6137E64C
P 6725 6150
F 0 "#PWR0106" H 6725 5900 50  0001 C CNN
F 1 "GND" H 6730 5977 50  0000 C CNN
F 2 "" H 6725 6150 50  0001 C CNN
F 3 "" H 6725 6150 50  0001 C CNN
	1    6725 6150
	1    0    0    -1  
$EndComp
$Comp
L power:+12V #PWR0107
U 1 1 6137FB09
P 6725 5325
F 0 "#PWR0107" H 6725 5175 50  0001 C CNN
F 1 "+12V" H 6740 5498 50  0000 C CNN
F 2 "" H 6725 5325 50  0001 C CNN
F 3 "" H 6725 5325 50  0001 C CNN
	1    6725 5325
	1    0    0    -1  
$EndComp
Text GLabel 7125 5750 2    50   Input ~ 0
V_supply
Wire Wire Line
	7125 5750 7050 5750
Connection ~ 6725 5750
Wire Wire Line
	6725 5750 6725 5850
$Comp
L Device:C_Small C8
U 1 1 61384302
P 7050 5950
F 0 "C8" H 7225 5950 50  0000 R CNN
F 1 "0.1u 16V" H 7450 6025 50  0000 R CNN
F 2 "" H 7050 5950 50  0001 C CNN
F 3 "~" H 7050 5950 50  0001 C CNN
	1    7050 5950
	1    0    0    1   
$EndComp
$Comp
L power:GNDD #PWR0108
U 1 1 61385013
P 8050 6175
F 0 "#PWR0108" H 8050 5925 50  0001 C CNN
F 1 "GNDD" H 8054 6020 50  0000 C CNN
F 2 "" H 8050 6175 50  0001 C CNN
F 3 "" H 8050 6175 50  0001 C CNN
	1    8050 6175
	1    0    0    -1  
$EndComp
Text GLabel 8125 5750 2    50   Input ~ 0
load_sense
Text GLabel 9075 4700 0    50   Input ~ 0
load_sense
Wire Wire Line
	5825 2300 5825 2375
Wire Wire Line
	5825 2375 6800 2375
Connection ~ 5825 2375
Wire Wire Line
	5825 2375 5825 2425
$Comp
L Device:R_Small R2
U 1 1 6138FA43
P 6575 1950
F 0 "R2" V 6379 1950 50  0000 C CNN
F 1 "60m" V 6470 1950 50  0000 C CNN
F 2 "" H 6575 1950 50  0001 C CNN
F 3 "~" H 6575 1950 50  0001 C CNN
	1    6575 1950
	0    1    1    0   
$EndComp
Wire Wire Line
	6675 1950 6800 1950
Wire Wire Line
	6275 1950 6375 1950
Connection ~ 6375 1950
Wire Wire Line
	6375 1950 6475 1950
Wire Wire Line
	6800 1950 6800 1600
Text GLabel 9075 5500 0    50   Input ~ 0
PWM
Wire Wire Line
	9075 5500 9200 5500
$Comp
L Device:D_Schottky D1
U 1 1 613BB138
P 4450 1075
F 0 "D1" H 4450 858 50  0000 C CNN
F 1 "D_Schottky" H 4450 949 50  0000 C CNN
F 2 "" H 4450 1075 50  0001 C CNN
F 3 "~" H 4450 1075 50  0001 C CNN
	1    4450 1075
	-1   0    0    1   
$EndComp
$Comp
L Device:R_Small R1
U 1 1 613B85E8
P 5400 1550
F 0 "R1" V 5204 1550 50  0000 C CNN
F 1 "10" V 5295 1550 50  0000 C CNN
F 2 "" H 5400 1550 50  0001 C CNN
F 3 "~" H 5400 1550 50  0001 C CNN
	1    5400 1550
	0    1    1    0   
$EndComp
Wire Wire Line
	5050 1450 5050 1075
Wire Wire Line
	5050 1075 4600 1075
Wire Wire Line
	4300 1075 3850 1075
Wire Wire Line
	3850 1075 3850 1450
Wire Wire Line
	3850 1450 4100 1450
Connection ~ 5050 1450
Wire Wire Line
	5050 1650 5050 1750
NoConn ~ 4100 1650
$Comp
L Device:C_Small C5
U 1 1 613DFD54
P 5050 1550
F 0 "C5" H 5142 1596 50  0000 L CNN
F 1 "10u 50V" H 5125 1475 50  0000 L CNN
F 2 "" H 5050 1550 50  0001 C CNN
F 3 "~" H 5050 1550 50  0001 C CNN
	1    5050 1550
	1    0    0    -1  
$EndComp
$Comp
L power:GND #PWR0110
U 1 1 613DE17F
P 3850 1975
F 0 "#PWR0110" H 3850 1725 50  0001 C CNN
F 1 "GND" H 3855 1802 50  0000 C CNN
F 2 "" H 3850 1975 50  0001 C CNN
F 3 "" H 3850 1975 50  0001 C CNN
	1    3850 1975
	1    0    0    -1  
$EndComp
Connection ~ 3850 1450
$Comp
L IR2125:IR2125 U3
U 1 1 613ACD65
P 4450 1650
F 0 "U3" H 4450 2115 50  0000 C CNN
F 1 "IR2125" H 4450 2024 50  0000 C CNN
F 2 "" H 4400 1800 50  0001 C CNN
F 3 "" H 4400 1800 50  0001 C CNN
	1    4450 1650
	1    0    0    -1  
$EndComp
Text GLabel 3575 1550 0    50   Input ~ 0
PWM
Wire Wire Line
	3575 1550 4100 1550
Wire Wire Line
	11050 4500 11050 5100
Connection ~ 11050 5100
Wire Wire Line
	5500 1550 5525 1550
Wire Wire Line
	5825 1750 5825 1950
Connection ~ 5825 1950
$Comp
L Device:C_Small C4
U 1 1 613E072A
P 3850 1550
F 0 "C4" H 3750 1625 50  0000 R CNN
F 1 "10u 50V" H 3800 1700 50  0000 R CNN
F 2 "" H 3850 1550 50  0001 C CNN
F 3 "~" H 3850 1550 50  0001 C CNN
	1    3850 1550
	1    0    0    1   
$EndComp
Wire Wire Line
	3850 1650 3850 1750
Connection ~ 3850 1750
Wire Wire Line
	4100 1750 3850 1750
Wire Wire Line
	3850 1750 3850 1975
Wire Wire Line
	4750 1750 4850 1750
Wire Wire Line
	4750 1650 4850 1650
Wire Wire Line
	4850 1650 4850 1750
Connection ~ 4850 1750
Wire Wire Line
	4850 1750 5050 1750
Wire Wire Line
	4750 1450 5050 1450
$Comp
L power:+12V #PWR0111
U 1 1 614D1067
P 3850 1025
F 0 "#PWR0111" H 3850 875 50  0001 C CNN
F 1 "+12V" H 3865 1198 50  0000 C CNN
F 2 "" H 3850 1025 50  0001 C CNN
F 3 "" H 3850 1025 50  0001 C CNN
	1    3850 1025
	1    0    0    -1  
$EndComp
Wire Wire Line
	3850 1025 3850 1075
Connection ~ 3850 1075
Wire Wire Line
	4750 1550 5300 1550
$Comp
L Device:CP C6
U 1 1 614EA6E8
P 6800 2150
F 0 "C6" H 6550 2150 50  0000 L CNN
F 1 "470u 50V" H 6400 2050 50  0000 L CNN
F 2 "" H 6838 2000 50  0001 C CNN
F 3 "~" H 6800 2150 50  0001 C CNN
	1    6800 2150
	1    0    0    -1  
$EndComp
$Comp
L LT1999-50:LT1999MPMS8-50-PBF U1
U 1 1 61526A78
P 1625 5050
F 0 "U1" H 1625 5525 60  0000 C CNN
F 1 "LT1999-50" H 1625 5425 60  0000 C CNN
F 2 "MSOP_8_ADI" H 2250 5325 60  0001 C CNN
F 3 "" H 1625 5050 60  0000 C CNN
	1    1625 5050
	1    0    0    -1  
$EndComp
NoConn ~ 2075 4900
Wire Wire Line
	2075 5200 2125 5200
Wire Wire Line
	2075 5100 2125 5100
Wire Wire Line
	2125 5100 2125 5200
Connection ~ 2125 5200
Wire Wire Line
	2075 5000 2125 5000
Text GLabel 2125 5000 2    50   Input ~ 0
Sense_out
$Comp
L power:+5V #PWR03
U 1 1 6153D27E
P 1075 4700
F 0 "#PWR03" H 1075 4550 50  0001 C CNN
F 1 "+5V" H 1090 4873 50  0000 C CNN
F 2 "" H 1075 4700 50  0001 C CNN
F 3 "" H 1075 4700 50  0001 C CNN
	1    1075 4700
	1    0    0    -1  
$EndComp
Wire Wire Line
	1075 4900 1175 4900
Wire Wire Line
	1075 5200 1175 5200
Wire Wire Line
	1075 4700 1075 4900
Connection ~ 1075 4900
Wire Wire Line
	1075 4900 1075 5200
$Comp
L power:GNDD #PWR06
U 1 1 6152F858
P 1075 5575
F 0 "#PWR06" H 1075 5325 50  0001 C CNN
F 1 "GNDD" H 1079 5420 50  0000 C CNN
F 2 "" H 1075 5575 50  0001 C CNN
F 3 "" H 1075 5575 50  0001 C CNN
	1    1075 5575
	1    0    0    -1  
$EndComp
Wire Wire Line
	1175 5000 775  5000
Wire Wire Line
	1175 5100 775  5100
Text Label 775  5000 0    50   ~ 0
sen_p
Text Label 775  5100 0    50   ~ 0
sen_n
Wire Wire Line
	6800 1600 7025 1600
Text Label 7025 1600 2    50   ~ 0
sen_n
Wire Wire Line
	6375 1950 6375 1600
Text Label 6600 1600 2    50   ~ 0
sen_p
Wire Wire Line
	6375 1600 6600 1600
$Comp
L LD1117V50:LD1117V50 CR1
U 1 1 6158791D
P 2000 1525
F 0 "CR1" H 2000 1825 60  0000 C CNN
F 1 "LD1117V50" H 2000 1725 60  0000 C CNN
F 2 "TO-220_STM" H 2900 1765 60  0001 C CNN
F 3 "https://www.st.com/resource/en/datasheet/ld1117.pdf" H 2000 1525 60  0001 C CNN
	1    2000 1525
	1    0    0    -1  
$EndComp
$Comp
L Device:C_Small C3
U 1 1 61590DD3
P 2450 1700
F 0 "C3" H 2542 1746 50  0000 L CNN
F 1 "10u 16V" H 2525 1625 50  0000 L CNN
F 2 "" H 2450 1700 50  0001 C CNN
F 3 "~" H 2450 1700 50  0001 C CNN
	1    2450 1700
	1    0    0    -1  
$EndComp
$Comp
L Device:C_Small C2
U 1 1 61592803
P 1550 1700
F 0 "C2" H 1400 1775 50  0000 L CNN
F 1 "100n 16V" H 1100 1625 50  0000 L CNN
F 2 "" H 1550 1700 50  0001 C CNN
F 3 "~" H 1550 1700 50  0001 C CNN
	1    1550 1700
	1    0    0    -1  
$EndComp
Wire Wire Line
	1550 1600 1550 1500
Wire Wire Line
	1550 1500 1675 1500
Wire Wire Line
	2325 1500 2450 1500
Wire Wire Line
	2450 1500 2450 1600
Wire Wire Line
	1550 1800 1550 1900
Wire Wire Line
	1550 1900 2000 1900
Wire Wire Line
	2450 1900 2450 1800
Wire Wire Line
	2000 1800 2000 1900
Connection ~ 2000 1900
Wire Wire Line
	2000 1900 2450 1900
$Comp
L power:GNDD #PWR05
U 1 1 615A9FCE
P 2000 1950
F 0 "#PWR05" H 2000 1700 50  0001 C CNN
F 1 "GNDD" H 2004 1795 50  0000 C CNN
F 2 "" H 2000 1950 50  0001 C CNN
F 3 "" H 2000 1950 50  0001 C CNN
	1    2000 1950
	1    0    0    -1  
$EndComp
Wire Wire Line
	2000 1900 2000 1950
$Comp
L power:+12V #PWR04
U 1 1 615B366B
P 1550 1300
F 0 "#PWR04" H 1550 1150 50  0001 C CNN
F 1 "+12V" H 1565 1473 50  0000 C CNN
F 2 "" H 1550 1300 50  0001 C CNN
F 3 "" H 1550 1300 50  0001 C CNN
	1    1550 1300
	1    0    0    -1  
$EndComp
Wire Wire Line
	1550 1300 1550 1500
Connection ~ 1550 1500
$Comp
L power:+5V #PWR07
U 1 1 615B65BD
P 2450 1300
F 0 "#PWR07" H 2450 1150 50  0001 C CNN
F 1 "+5V" H 2465 1473 50  0000 C CNN
F 2 "" H 2450 1300 50  0001 C CNN
F 3 "" H 2450 1300 50  0001 C CNN
	1    2450 1300
	1    0    0    -1  
$EndComp
Wire Wire Line
	2450 1300 2450 1500
Connection ~ 2450 1500
$Comp
L Device:C_Small C1
U 1 1 615DA83F
P 975 1575
F 0 "C1" H 825 1650 50  0000 L CNN
F 1 "100u 50V" H 575 1500 50  0000 L CNN
F 2 "" H 975 1575 50  0001 C CNN
F 3 "~" H 975 1575 50  0001 C CNN
	1    975  1575
	1    0    0    -1  
$EndComp
$Comp
L power:+12V #PWR01
U 1 1 615DA84D
P 975 1300
F 0 "#PWR01" H 975 1150 50  0001 C CNN
F 1 "+12V" H 990 1473 50  0000 C CNN
F 2 "" H 975 1300 50  0001 C CNN
F 3 "" H 975 1300 50  0001 C CNN
	1    975  1300
	1    0    0    -1  
$EndComp
Wire Wire Line
	975  1300 975  1475
$Comp
L power:GND #PWR02
U 1 1 615E8453
P 975 1925
F 0 "#PWR02" H 975 1675 50  0001 C CNN
F 1 "GND" H 975 1750 50  0000 C CNN
F 2 "" H 975 1925 50  0001 C CNN
F 3 "" H 975 1925 50  0001 C CNN
	1    975  1925
	1    0    0    -1  
$EndComp
Wire Wire Line
	975  1675 975  1925
$Comp
L Device:Opamp_Dual_Generic U2
U 1 1 61640CC8
P 3450 6825
F 0 "U2" H 3450 6458 50  0000 C CNN
F 1 "LM7322" H 3450 6549 50  0000 C CNN
F 2 "" H 3450 6825 50  0001 C CNN
F 3 "~" H 3450 6825 50  0001 C CNN
	1    3450 6825
	1    0    0    1   
$EndComp
$Comp
L Device:Opamp_Dual_Generic U2
U 2 1 616417B3
P 5200 6725
F 0 "U2" H 5200 6358 50  0000 C CNN
F 1 "LM7322" H 5200 6449 50  0000 C CNN
F 2 "" H 5200 6725 50  0001 C CNN
F 3 "~" H 5200 6725 50  0001 C CNN
	2    5200 6725
	1    0    0    1   
$EndComp
$Comp
L Device:Opamp_Dual_Generic U2
U 3 1 61642627
P 1200 6600
F 0 "U2" V 1295 6600 50  0000 C CNN
F 1 "LM7322" V 1204 6600 50  0000 C CNN
F 2 "" H 1200 6600 50  0001 C CNN
F 3 "~" H 1200 6600 50  0001 C CNN
	3    1200 6600
	0    -1   -1   0   
$EndComp
$Comp
L power:GNDD #PWR0109
U 1 1 616526D5
P 1550 7025
F 0 "#PWR0109" H 1550 6775 50  0001 C CNN
F 1 "GNDD" H 1554 6870 50  0000 C CNN
F 2 "" H 1550 7025 50  0001 C CNN
F 3 "" H 1550 7025 50  0001 C CNN
	1    1550 7025
	1    0    0    -1  
$EndComp
$Comp
L power:GNDD #PWR0112
U 1 1 61660037
P 825 7025
F 0 "#PWR0112" H 825 6775 50  0001 C CNN
F 1 "GNDD" H 829 6870 50  0000 C CNN
F 2 "" H 825 7025 50  0001 C CNN
F 3 "" H 825 7025 50  0001 C CNN
	1    825  7025
	1    0    0    -1  
$EndComp
$Comp
L Device:C_Small C9
U 1 1 61661717
P 825 6875
F 0 "C9" H 1000 6875 50  0000 R CNN
F 1 "0.1u 16V" H 1250 6975 50  0000 R CNN
F 2 "" H 825 6875 50  0001 C CNN
F 3 "~" H 825 6875 50  0001 C CNN
	1    825  6875
	1    0    0    1   
$EndComp
Wire Wire Line
	825  6975 825  7025
Wire Wire Line
	900  6700 825  6700
Wire Wire Line
	825  6700 825  6775
Wire Wire Line
	825  6500 825  6700
Connection ~ 825  6700
Wire Wire Line
	1500 6700 1550 6700
Wire Wire Line
	1550 6700 1550 7025
Text GLabel 7725 5325 1    50   Input ~ 0
V_load
$Comp
L Diode:1N4148W D3
U 1 1 616A906E
P 3950 6825
F 0 "D3" H 3950 6608 50  0000 C CNN
F 1 "1N4148W" H 3950 6699 50  0000 C CNN
F 2 "Diode_SMD:D_SOD-123" H 3950 6650 50  0001 C CNN
F 3 "https://www.vishay.com/docs/85748/1n4148w.pdf" H 3950 6825 50  0001 C CNN
	1    3950 6825
	-1   0    0    1   
$EndComp
Wire Wire Line
	3750 6825 3800 6825
Wire Wire Line
	4100 6825 4175 6825
Wire Wire Line
	4175 6825 4175 6350
Wire Wire Line
	4175 6350 3075 6350
Wire Wire Line
	3075 6350 3075 6725
Wire Wire Line
	3075 6725 3150 6725
Connection ~ 4175 6825
$Comp
L Device:R_Small R8
U 1 1 616D94E8
P 4350 6825
F 0 "R8" V 4154 6825 50  0000 C CNN
F 1 "33" V 4245 6825 50  0000 C CNN
F 2 "" H 4350 6825 50  0001 C CNN
F 3 "~" H 4350 6825 50  0001 C CNN
	1    4350 6825
	0    1    1    0   
$EndComp
Wire Wire Line
	4175 6825 4250 6825
$Comp
L Device:C_Small C10
U 1 1 616E1E84
P 4550 7025
F 0 "C10" H 4450 7100 50  0000 R CNN
F 1 "10n 16V" H 4500 7175 50  0000 R CNN
F 2 "" H 4550 7025 50  0001 C CNN
F 3 "~" H 4550 7025 50  0001 C CNN
	1    4550 7025
	1    0    0    1   
$EndComp
Wire Wire Line
	4450 6825 4550 6825
Wire Wire Line
	4550 6825 4550 6925
$Comp
L power:GNDD #PWR0114
U 1 1 616EBE0D
P 4700 7325
F 0 "#PWR0114" H 4700 7075 50  0001 C CNN
F 1 "GNDD" H 4704 7170 50  0000 C CNN
F 2 "" H 4700 7325 50  0001 C CNN
F 3 "" H 4700 7325 50  0001 C CNN
	1    4700 7325
	1    0    0    -1  
$EndComp
$Comp
L Device:R_Small R9
U 1 1 616F0891
P 4825 7025
F 0 "R9" H 4725 7100 50  0000 C CNN
F 1 "1M" H 4725 7000 50  0000 C CNN
F 2 "" H 4825 7025 50  0001 C CNN
F 3 "~" H 4825 7025 50  0001 C CNN
	1    4825 7025
	-1   0    0    1   
$EndComp
Wire Wire Line
	4825 6825 4825 6925
Wire Wire Line
	4550 7125 4550 7225
Wire Wire Line
	4550 7225 4700 7225
Wire Wire Line
	4825 7225 4825 7125
Wire Wire Line
	4700 7325 4700 7225
Connection ~ 4700 7225
Wire Wire Line
	4700 7225 4825 7225
Wire Wire Line
	5500 6725 5575 6725
Wire Wire Line
	5575 6725 5575 6225
Wire Wire Line
	5575 6225 4825 6225
Wire Wire Line
	4825 6225 4825 6625
Wire Wire Line
	4825 6625 4900 6625
Wire Wire Line
	5575 6725 5675 6725
Connection ~ 5575 6725
Connection ~ 4550 6825
Wire Wire Line
	4550 6825 4825 6825
Wire Wire Line
	4825 6825 4900 6825
Connection ~ 4825 6825
Text GLabel 2400 6925 0    50   Input ~ 0
Sense_out
Text GLabel 5675 6725 2    50   Input ~ 0
Pk_voltage
Text GLabel 4025 5050 0    50   Input ~ 0
Sense_out
$Comp
L Device:R_Small R10
U 1 1 6179FB42
P 4275 5050
F 0 "R10" V 4200 5050 50  0000 C CNN
F 1 "16k" V 4375 5050 50  0000 C CNN
F 2 "Resistor_SMD:R_0603_1608Metric_Pad0.98x0.95mm_HandSolder" H 4275 5050 50  0001 C CNN
F 3 "~" H 4275 5050 50  0001 C CNN
F 4 "RR0816P-163-D" V 4275 5050 50  0001 C CNN "Part Number"
	1    4275 5050
	0    1    1    0   
$EndComp
$Comp
L Device:C_Small C11
U 1 1 617A0393
P 4525 5200
F 0 "C11" H 4750 5200 50  0000 R CNN
F 1 "1u 16V" H 4875 5300 50  0000 R CNN
F 2 "" H 4525 5200 50  0001 C CNN
F 3 "~" H 4525 5200 50  0001 C CNN
	1    4525 5200
	1    0    0    1   
$EndComp
Wire Wire Line
	4025 5050 4175 5050
Wire Wire Line
	4375 5050 4525 5050
Wire Wire Line
	4525 5050 4525 5100
$Comp
L power:GNDD #PWR0115
U 1 1 617B133A
P 4525 5350
F 0 "#PWR0115" H 4525 5100 50  0001 C CNN
F 1 "GNDD" H 4529 5195 50  0000 C CNN
F 2 "" H 4525 5350 50  0001 C CNN
F 3 "" H 4525 5350 50  0001 C CNN
	1    4525 5350
	1    0    0    -1  
$EndComp
Wire Wire Line
	4525 5300 4525 5350
Wire Wire Line
	4525 5050 4725 5050
Connection ~ 4525 5050
Text GLabel 4725 5050 2    50   Input ~ 0
Avg_voltage
Text Notes 3775 4850 0    50   ~ 0
First order passive low pass filter\nOutputs the average ripple voltage\n10Hz cutoff frequency
Text Notes 3075 6175 0    50   ~ 0
Ripple peak voltage detector.\nOutputs the ripple peak voltage
Text Notes 825  4400 0    50   ~ 0
Current shunt voltage amplifier\nVoltage Gain = 50\nShunt Resistance 60mOhms
Text Notes 800  875  0    50   ~ 0
Supply voltage reservoir and 5V LDO
$Comp
L Device:C_Small C12
U 1 1 614BE6E3
P 1075 5350
F 0 "C12" H 975 5350 50  0000 R CNN
F 1 "0.1u 16V" H 1000 5450 50  0000 R CNN
F 2 "" H 1075 5350 50  0001 C CNN
F 3 "~" H 1075 5350 50  0001 C CNN
	1    1075 5350
	1    0    0    1   
$EndComp
Wire Wire Line
	1075 5250 1075 5200
Connection ~ 1075 5200
Wire Wire Line
	1075 5450 1075 5500
Wire Wire Line
	2125 5200 2125 5500
Wire Wire Line
	1075 5575 1075 5500
Connection ~ 1075 5500
Wire Wire Line
	1075 5500 2125 5500
Wire Wire Line
	7050 6175 7050 6050
Wire Wire Line
	7050 5850 7050 5750
Connection ~ 7050 5750
Wire Wire Line
	7050 5750 6725 5750
$Comp
L Device:R_Small R5
U 1 1 6137E641
P 6725 5950
F 0 "R5" H 6784 5996 50  0000 L CNN
F 1 "120k" H 6784 5905 50  0000 L CNN
F 2 "" H 6725 5950 50  0001 C CNN
F 3 "~" H 6725 5950 50  0001 C CNN
	1    6725 5950
	1    0    0    -1  
$EndComp
Wire Wire Line
	8125 5750 8050 5750
$Comp
L Device:C_Small C?
U 1 1 615661DB
P 8050 5950
F 0 "C?" H 8225 5950 50  0000 R CNN
F 1 "0.1u 16V" H 8450 6025 50  0000 R CNN
F 2 "" H 8050 5950 50  0001 C CNN
F 3 "~" H 8050 5950 50  0001 C CNN
	1    8050 5950
	1    0    0    1   
$EndComp
Wire Wire Line
	8050 5850 8050 5750
Wire Wire Line
	7725 5650 7725 5750
Wire Wire Line
	8050 5750 7725 5750
Connection ~ 8050 5750
Connection ~ 7725 5750
Wire Wire Line
	7725 5750 7725 5850
Wire Wire Line
	9075 4800 9200 4800
Wire Wire Line
	6725 6050 6725 6150
Wire Wire Line
	9075 4700 9200 4700
$Comp
L power:GNDD #PWR?
U 1 1 615943DC
P 7050 6175
F 0 "#PWR?" H 7050 5925 50  0001 C CNN
F 1 "GNDD" H 7054 6020 50  0000 C CNN
F 2 "" H 7050 6175 50  0001 C CNN
F 3 "" H 7050 6175 50  0001 C CNN
	1    7050 6175
	1    0    0    -1  
$EndComp
Wire Wire Line
	7725 6050 7725 6150
Wire Wire Line
	8050 6050 8050 6175
$Comp
L Device:C_Small C?
U 1 1 614EAD80
P 2575 6925
F 0 "C?" V 2375 6975 50  0000 R CNN
F 1 "100u 16V" V 2450 7175 50  0000 R CNN
F 2 "" H 2575 6925 50  0001 C CNN
F 3 "~" H 2575 6925 50  0001 C CNN
	1    2575 6925
	0    -1   1    0   
$EndComp
Wire Wire Line
	2400 6925 2475 6925
Wire Wire Line
	2675 6925 2900 6925
$Comp
L Device:R_Small R?
U 1 1 614FDB3E
P 2900 6700
F 0 "R?" H 2750 6775 50  0000 L CNN
F 1 "100k" H 2675 6675 50  0000 L CNN
F 2 "" H 2900 6700 50  0001 C CNN
F 3 "~" H 2900 6700 50  0001 C CNN
	1    2900 6700
	1    0    0    -1  
$EndComp
Wire Wire Line
	2900 6500 2900 6600
Wire Wire Line
	2900 6800 2900 6925
Connection ~ 2900 6925
Wire Wire Line
	2900 6925 3150 6925
$Comp
L power:+12V #PWR?
U 1 1 614CFEEF
P 825 6500
F 0 "#PWR?" H 825 6350 50  0001 C CNN
F 1 "+12V" H 840 6673 50  0000 C CNN
F 2 "" H 825 6500 50  0001 C CNN
F 3 "" H 825 6500 50  0001 C CNN
	1    825  6500
	1    0    0    -1  
$EndComp
$Comp
L power:+12V #PWR?
U 1 1 614D084A
P 2900 6500
F 0 "#PWR?" H 2900 6350 50  0001 C CNN
F 1 "+12V" H 2915 6673 50  0000 C CNN
F 2 "" H 2900 6500 50  0001 C CNN
F 3 "" H 2900 6500 50  0001 C CNN
	1    2900 6500
	1    0    0    -1  
$EndComp
$Comp
L Device:R_Small R?
U 1 1 614D2EB3
P 2900 7125
F 0 "R?" H 2750 7200 50  0000 L CNN
F 1 "100k" H 2675 7100 50  0000 L CNN
F 2 "" H 2900 7125 50  0001 C CNN
F 3 "~" H 2900 7125 50  0001 C CNN
	1    2900 7125
	1    0    0    -1  
$EndComp
$Comp
L power:GNDD #PWR?
U 1 1 614DC645
P 2900 7325
F 0 "#PWR?" H 2900 7075 50  0001 C CNN
F 1 "GNDD" H 2904 7170 50  0000 C CNN
F 2 "" H 2900 7325 50  0001 C CNN
F 3 "" H 2900 7325 50  0001 C CNN
	1    2900 7325
	1    0    0    -1  
$EndComp
Wire Wire Line
	2900 7225 2900 7325
Wire Wire Line
	2900 6925 2900 7025
$EndSCHEMATC
