EESchema Schematic File Version 4
EELAYER 30 0
EELAYER END
$Descr A4 11693 8268
encoding utf-8
Sheet 1 1
Title ""
Date ""
Rev ""
Comp ""
Comment1 ""
Comment2 ""
Comment3 ""
Comment4 ""
$EndDescr
$Comp
L ESP32-DEVKITC-32D:ESP32-DEVKITC-32D U4
U 1 1 6135B32C
P 10000 5400
F 0 "U4" H 10000 6567 50  0000 C CNN
F 1 "ESP32-DEVKITC-32D" H 10000 6476 50  0000 C CNN
F 2 "MODULE_ESP32-DEVKITC-32D:MODULE_ESP32-DEVKITC-32D" H 10000 5400 50  0001 L BNN
F 3 "" H 10000 5400 50  0001 L BNN
F 4 "Espressif Systems" H 10000 5400 50  0001 L BNN "MANUFACTURER"
F 5 "4" H 10000 5400 50  0001 L BNN "PARTREV"
	1    10000 5400
	1    0    0    -1  
$EndComp
Wire Wire Line
	10800 4500 11050 4500
$Comp
L power:GNDD #PWR0101
U 1 1 613620C9
P 11050 5150
F 0 "#PWR0101" H 11050 4900 50  0001 C CNN
F 1 "GNDD" H 11054 4995 50  0000 C CNN
F 2 "" H 11050 5150 50  0001 C CNN
F 3 "" H 11050 5150 50  0001 C CNN
	1    11050 5150
	1    0    0    -1  
$EndComp
Wire Wire Line
	10800 5100 11050 5100
Wire Wire Line
	11050 5100 11050 5150
$Comp
L power:GNDD #PWR0102
U 1 1 61364069
P 8950 5850
F 0 "#PWR0102" H 8950 5600 50  0001 C CNN
F 1 "GNDD" H 8954 5695 50  0000 C CNN
F 2 "" H 8950 5850 50  0001 C CNN
F 3 "" H 8950 5850 50  0001 C CNN
	1    8950 5850
	1    0    0    -1  
$EndComp
Wire Wire Line
	8950 5850 8950 5800
Wire Wire Line
	8950 5800 9200 5800
NoConn ~ 9200 4500
NoConn ~ 9200 4600
NoConn ~ 9200 6300
Text GLabel 8900 4800 0    50   Input ~ 0
V_supply
NoConn ~ 9200 4900
NoConn ~ 9200 5000
NoConn ~ 9200 5100
NoConn ~ 9200 5200
NoConn ~ 9200 5300
NoConn ~ 9200 5400
NoConn ~ 9200 5600
NoConn ~ 9200 5700
NoConn ~ 9200 5900
NoConn ~ 9200 6000
NoConn ~ 9200 6100
NoConn ~ 9200 6200
NoConn ~ 10800 6300
NoConn ~ 10800 6200
NoConn ~ 10800 6100
NoConn ~ 10800 6000
NoConn ~ 10800 5900
NoConn ~ 10800 5800
NoConn ~ 10800 5700
NoConn ~ 10800 5600
NoConn ~ 10800 5500
NoConn ~ 10800 5400
NoConn ~ 10800 5300
NoConn ~ 10800 5200
NoConn ~ 10800 5000
NoConn ~ 10800 4900
NoConn ~ 10800 4800
NoConn ~ 10800 4700
NoConn ~ 10800 4600
$Comp
L power:+12V #PWR0103
U 1 1 6136E82D
P 5825 1200
F 0 "#PWR0103" H 5825 1050 50  0001 C CNN
F 1 "+12V" H 5840 1373 50  0000 C CNN
F 2 "" H 5825 1200 50  0001 C CNN
F 3 "" H 5825 1200 50  0001 C CNN
	1    5825 1200
	1    0    0    -1  
$EndComp
$Comp
L Device:Q_NMOS_GDS Q1
U 1 1 61370C87
P 5725 1550
F 0 "Q1" H 5929 1596 50  0000 L CNN
F 1 "NMOS" H 5929 1505 50  0000 L CNN
F 2 "" H 5925 1650 50  0001 C CNN
F 3 "~" H 5725 1550 50  0001 C CNN
	1    5725 1550
	1    0    0    -1  
$EndComp
Wire Wire Line
	5825 1200 5825 1350
$Comp
L Device:D_Schottky D2
U 1 1 61372223
P 5825 2150
F 0 "D2" V 5779 2230 50  0000 L CNN
F 1 "D_Schottky" V 5870 2230 50  0000 L CNN
F 2 "" H 5825 2150 50  0001 C CNN
F 3 "~" H 5825 2150 50  0001 C CNN
	1    5825 2150
	0    1    1    0   
$EndComp
$Comp
L power:GND #PWR0104
U 1 1 613736F3
P 5825 2425
F 0 "#PWR0104" H 5825 2175 50  0001 C CNN
F 1 "GND" H 5830 2252 50  0000 C CNN
F 2 "" H 5825 2425 50  0001 C CNN
F 3 "" H 5825 2425 50  0001 C CNN
	1    5825 2425
	1    0    0    -1  
$EndComp
$Comp
L Device:L L1
U 1 1 61375946
P 6125 1950
F 0 "L1" V 6315 1950 50  0000 C CNN
F 1 "L" V 6224 1950 50  0000 C CNN
F 2 "" H 6125 1950 50  0001 C CNN
F 3 "~" H 6125 1950 50  0001 C CNN
	1    6125 1950
	0    -1   -1   0   
$EndComp
Wire Wire Line
	5975 1950 5825 1950
Wire Wire Line
	5825 1950 5825 2000
Wire Wire Line
	6800 1950 6800 2000
Wire Wire Line
	6800 2300 6800 2375
$Comp
L Device:R R3
U 1 1 61379310
P 7175 2150
F 0 "R3" H 7245 2196 50  0000 L CNN
F 1 "10 20W" H 7245 2105 50  0000 L CNN
F 2 "" V 7105 2150 50  0001 C CNN
F 3 "~" H 7175 2150 50  0001 C CNN
	1    7175 2150
	1    0    0    -1  
$EndComp
Wire Wire Line
	6800 1950 7175 1950
Wire Wire Line
	7175 1950 7175 2000
Connection ~ 6800 1950
Wire Wire Line
	7175 2300 7175 2375
Wire Wire Line
	7175 2375 6800 2375
Connection ~ 6800 2375
Text GLabel 7275 1950 2    50   Input ~ 0
V_load
Wire Wire Line
	7275 1950 7175 1950
Connection ~ 7175 1950
$Comp
L Device:R_Small R6
U 1 1 6137AA0B
P 10325 3100
F 0 "R6" H 10384 3146 50  0000 L CNN
F 1 "56k" H 10384 3055 50  0000 L CNN
F 2 "" H 10325 3100 50  0001 C CNN
F 3 "~" H 10325 3100 50  0001 C CNN
	1    10325 3100
	1    0    0    -1  
$EndComp
Wire Wire Line
	10325 2875 10325 3000
$Comp
L Device:R_Small R7
U 1 1 6137C4E4
P 10325 3500
F 0 "R7" H 10384 3546 50  0000 L CNN
F 1 "22k" H 10384 3455 50  0000 L CNN
F 2 "" H 10325 3500 50  0001 C CNN
F 3 "~" H 10325 3500 50  0001 C CNN
	1    10325 3500
	1    0    0    -1  
$EndComp
Wire Wire Line
	10325 3200 10325 3325
$Comp
L power:GND #PWR0105
U 1 1 6137CD28
P 10325 3700
F 0 "#PWR0105" H 10325 3450 50  0001 C CNN
F 1 "GND" H 10330 3527 50  0000 C CNN
F 2 "" H 10325 3700 50  0001 C CNN
F 3 "" H 10325 3700 50  0001 C CNN
	1    10325 3700
	1    0    0    -1  
$EndComp
Wire Wire Line
	10325 3600 10325 3700
$Comp
L Device:R_Small R4
U 1 1 6137E635
P 9600 3100
F 0 "R4" H 9659 3146 50  0000 L CNN
F 1 "560k" H 9659 3055 50  0000 L CNN
F 2 "" H 9600 3100 50  0001 C CNN
F 3 "~" H 9600 3100 50  0001 C CNN
	1    9600 3100
	1    0    0    -1  
$EndComp
Wire Wire Line
	9600 2875 9600 3000
$Comp
L Device:R_Small R5
U 1 1 6137E641
P 9600 3500
F 0 "R5" H 9659 3546 50  0000 L CNN
F 1 "120k" H 9659 3455 50  0000 L CNN
F 2 "" H 9600 3500 50  0001 C CNN
F 3 "~" H 9600 3500 50  0001 C CNN
	1    9600 3500
	1    0    0    -1  
$EndComp
Wire Wire Line
	9600 3200 9600 3325
$Comp
L power:GND #PWR0106
U 1 1 6137E64C
P 9600 3700
F 0 "#PWR0106" H 9600 3450 50  0001 C CNN
F 1 "GND" H 9605 3527 50  0000 C CNN
F 2 "" H 9600 3700 50  0001 C CNN
F 3 "" H 9600 3700 50  0001 C CNN
	1    9600 3700
	1    0    0    -1  
$EndComp
Wire Wire Line
	9600 3600 9600 3700
$Comp
L power:+12V #PWR0107
U 1 1 6137FB09
P 9600 2875
F 0 "#PWR0107" H 9600 2725 50  0001 C CNN
F 1 "+12V" H 9615 3048 50  0000 C CNN
F 2 "" H 9600 2875 50  0001 C CNN
F 3 "" H 9600 2875 50  0001 C CNN
	1    9600 2875
	1    0    0    -1  
$EndComp
Text GLabel 9725 3325 2    50   Input ~ 0
V_supply
Wire Wire Line
	9725 3325 9600 3325
Connection ~ 9600 3325
Wire Wire Line
	9600 3325 9600 3400
Wire Wire Line
	8900 4800 8975 4800
$Comp
L Device:C_Small C8
U 1 1 61384302
P 8975 5000
F 0 "C8" H 8883 4954 50  0000 R CNN
F 1 "0.1u 16V" H 8883 5045 50  0000 R CNN
F 2 "" H 8975 5000 50  0001 C CNN
F 3 "~" H 8975 5000 50  0001 C CNN
	1    8975 5000
	1    0    0    1   
$EndComp
$Comp
L power:GNDD #PWR0108
U 1 1 61385013
P 8375 5275
F 0 "#PWR0108" H 8375 5025 50  0001 C CNN
F 1 "GNDD" H 8379 5120 50  0000 C CNN
F 2 "" H 8375 5275 50  0001 C CNN
F 3 "" H 8375 5275 50  0001 C CNN
	1    8375 5275
	1    0    0    -1  
$EndComp
Wire Wire Line
	8975 4900 8975 4800
Connection ~ 8975 4800
Wire Wire Line
	8975 4800 9200 4800
$Comp
L Device:C_Small C7
U 1 1 613883ED
P 8375 5000
F 0 "C7" H 8283 4954 50  0000 R CNN
F 1 "0.1u 16V" H 8283 5045 50  0000 R CNN
F 2 "" H 8375 5000 50  0001 C CNN
F 3 "~" H 8375 5000 50  0001 C CNN
	1    8375 5000
	1    0    0    1   
$EndComp
Wire Wire Line
	8375 4700 9200 4700
Wire Wire Line
	8375 4700 8375 4900
Text GLabel 10475 3325 2    50   Input ~ 0
load_sense
Wire Wire Line
	10475 3325 10325 3325
Connection ~ 10325 3325
Wire Wire Line
	10325 3325 10325 3400
Text GLabel 8300 4700 0    50   Input ~ 0
load_sense
Wire Wire Line
	8300 4700 8375 4700
Connection ~ 8375 4700
Wire Wire Line
	5825 2300 5825 2375
Wire Wire Line
	5825 2375 6800 2375
Connection ~ 5825 2375
Wire Wire Line
	5825 2375 5825 2425
$Comp
L Device:R_Small R2
U 1 1 6138FA43
P 6575 1950
F 0 "R2" V 6379 1950 50  0000 C CNN
F 1 "60m" V 6470 1950 50  0000 C CNN
F 2 "" H 6575 1950 50  0001 C CNN
F 3 "~" H 6575 1950 50  0001 C CNN
	1    6575 1950
	0    1    1    0   
$EndComp
Wire Wire Line
	6675 1950 6800 1950
Wire Wire Line
	6275 1950 6375 1950
Connection ~ 6375 1950
Wire Wire Line
	6375 1950 6475 1950
Wire Wire Line
	6800 1950 6800 1600
Text GLabel 9075 5500 0    50   Input ~ 0
PWM
Wire Wire Line
	9075 5500 9200 5500
$Comp
L Device:D_Schottky D1
U 1 1 613BB138
P 4450 1075
F 0 "D1" H 4450 858 50  0000 C CNN
F 1 "D_Schottky" H 4450 949 50  0000 C CNN
F 2 "" H 4450 1075 50  0001 C CNN
F 3 "~" H 4450 1075 50  0001 C CNN
	1    4450 1075
	-1   0    0    1   
$EndComp
$Comp
L Device:R_Small R1
U 1 1 613B85E8
P 5400 1550
F 0 "R1" V 5204 1550 50  0000 C CNN
F 1 "10" V 5295 1550 50  0000 C CNN
F 2 "" H 5400 1550 50  0001 C CNN
F 3 "~" H 5400 1550 50  0001 C CNN
	1    5400 1550
	0    1    1    0   
$EndComp
Wire Wire Line
	5050 1450 5050 1075
Wire Wire Line
	5050 1075 4600 1075
Wire Wire Line
	4300 1075 3850 1075
Wire Wire Line
	3850 1075 3850 1450
Wire Wire Line
	3850 1450 4100 1450
Connection ~ 5050 1450
Wire Wire Line
	5050 1650 5050 1750
NoConn ~ 4100 1650
$Comp
L Device:C_Small C5
U 1 1 613DFD54
P 5050 1550
F 0 "C5" H 5142 1596 50  0000 L CNN
F 1 "10u 50V" H 5125 1475 50  0000 L CNN
F 2 "" H 5050 1550 50  0001 C CNN
F 3 "~" H 5050 1550 50  0001 C CNN
	1    5050 1550
	1    0    0    -1  
$EndComp
$Comp
L power:GND #PWR0110
U 1 1 613DE17F
P 3850 1975
F 0 "#PWR0110" H 3850 1725 50  0001 C CNN
F 1 "GND" H 3855 1802 50  0000 C CNN
F 2 "" H 3850 1975 50  0001 C CNN
F 3 "" H 3850 1975 50  0001 C CNN
	1    3850 1975
	1    0    0    -1  
$EndComp
Connection ~ 3850 1450
$Comp
L IR2125:IR2125 U3
U 1 1 613ACD65
P 4450 1650
F 0 "U3" H 4450 2115 50  0000 C CNN
F 1 "IR2125" H 4450 2024 50  0000 C CNN
F 2 "" H 4400 1800 50  0001 C CNN
F 3 "" H 4400 1800 50  0001 C CNN
	1    4450 1650
	1    0    0    -1  
$EndComp
Text GLabel 3575 1550 0    50   Input ~ 0
PWM
Wire Wire Line
	3575 1550 4100 1550
Wire Wire Line
	11050 4500 11050 5100
Connection ~ 11050 5100
Wire Wire Line
	5500 1550 5525 1550
Wire Wire Line
	5825 1750 5825 1950
Connection ~ 5825 1950
$Comp
L Device:C_Small C4
U 1 1 613E072A
P 3850 1550
F 0 "C4" H 3750 1625 50  0000 R CNN
F 1 "10u 50V" H 3800 1700 50  0000 R CNN
F 2 "" H 3850 1550 50  0001 C CNN
F 3 "~" H 3850 1550 50  0001 C CNN
	1    3850 1550
	1    0    0    1   
$EndComp
Wire Wire Line
	3850 1650 3850 1750
Connection ~ 3850 1750
Wire Wire Line
	4100 1750 3850 1750
Wire Wire Line
	3850 1750 3850 1975
Wire Wire Line
	4750 1750 4850 1750
Wire Wire Line
	4750 1650 4850 1650
Wire Wire Line
	4850 1650 4850 1750
Connection ~ 4850 1750
Wire Wire Line
	4850 1750 5050 1750
Wire Wire Line
	4750 1450 5050 1450
$Comp
L power:+12V #PWR0111
U 1 1 614D1067
P 3850 1025
F 0 "#PWR0111" H 3850 875 50  0001 C CNN
F 1 "+12V" H 3865 1198 50  0000 C CNN
F 2 "" H 3850 1025 50  0001 C CNN
F 3 "" H 3850 1025 50  0001 C CNN
	1    3850 1025
	1    0    0    -1  
$EndComp
Wire Wire Line
	3850 1025 3850 1075
Connection ~ 3850 1075
Wire Wire Line
	4750 1550 5300 1550
$Comp
L Device:CP C6
U 1 1 614EA6E8
P 6800 2150
F 0 "C6" H 6550 2150 50  0000 L CNN
F 1 "470u 50V" H 6400 2050 50  0000 L CNN
F 2 "" H 6838 2000 50  0001 C CNN
F 3 "~" H 6800 2150 50  0001 C CNN
	1    6800 2150
	1    0    0    -1  
$EndComp
$Comp
L LT1999-50:LT1999MPMS8-50-PBF U1
U 1 1 61526A78
P 1625 5050
F 0 "U1" H 1625 5525 60  0000 C CNN
F 1 "LT1999-50" H 1625 5425 60  0000 C CNN
F 2 "MSOP_8_ADI" H 2250 5325 60  0001 C CNN
F 3 "" H 1625 5050 60  0000 C CNN
	1    1625 5050
	1    0    0    -1  
$EndComp
NoConn ~ 2075 4900
Wire Wire Line
	2075 5200 2175 5200
Wire Wire Line
	2075 5100 2175 5100
Wire Wire Line
	2175 5100 2175 5200
Connection ~ 2175 5200
Wire Wire Line
	2075 5000 2125 5000
Text GLabel 2125 5000 2    50   Input ~ 0
Sense_out
$Comp
L power:+5V #PWR03
U 1 1 6153D27E
P 1075 4700
F 0 "#PWR03" H 1075 4550 50  0001 C CNN
F 1 "+5V" H 1090 4873 50  0000 C CNN
F 2 "" H 1075 4700 50  0001 C CNN
F 3 "" H 1075 4700 50  0001 C CNN
	1    1075 4700
	1    0    0    -1  
$EndComp
Wire Wire Line
	1075 4900 1175 4900
Wire Wire Line
	1075 5200 1175 5200
Wire Wire Line
	1075 4700 1075 4900
Connection ~ 1075 4900
Wire Wire Line
	1075 4900 1075 5200
$Comp
L power:GNDD #PWR06
U 1 1 6152F858
P 2175 5375
F 0 "#PWR06" H 2175 5125 50  0001 C CNN
F 1 "GNDD" H 2179 5220 50  0000 C CNN
F 2 "" H 2175 5375 50  0001 C CNN
F 3 "" H 2175 5375 50  0001 C CNN
	1    2175 5375
	1    0    0    -1  
$EndComp
Wire Wire Line
	2175 5200 2175 5375
Wire Wire Line
	1175 5000 775  5000
Wire Wire Line
	1175 5100 775  5100
Text Label 775  5000 0    50   ~ 0
sen_p
Text Label 775  5100 0    50   ~ 0
sen_n
Wire Wire Line
	6800 1600 7025 1600
Text Label 7025 1600 2    50   ~ 0
sen_n
Wire Wire Line
	6375 1950 6375 1600
Text Label 6600 1600 2    50   ~ 0
sen_p
Wire Wire Line
	6375 1600 6600 1600
Wire Wire Line
	8975 5100 8975 5200
Wire Wire Line
	8375 5200 8975 5200
$Comp
L LD1117V50:LD1117V50 CR1
U 1 1 6158791D
P 2000 1525
F 0 "CR1" H 2000 1825 60  0000 C CNN
F 1 "LD1117V50" H 2000 1725 60  0000 C CNN
F 2 "TO-220_STM" H 2900 1765 60  0001 C CNN
F 3 "https://www.st.com/resource/en/datasheet/ld1117.pdf" H 2000 1525 60  0001 C CNN
	1    2000 1525
	1    0    0    -1  
$EndComp
$Comp
L Device:C_Small C3
U 1 1 61590DD3
P 2450 1700
F 0 "C3" H 2542 1746 50  0000 L CNN
F 1 "10u 16V" H 2525 1625 50  0000 L CNN
F 2 "" H 2450 1700 50  0001 C CNN
F 3 "~" H 2450 1700 50  0001 C CNN
	1    2450 1700
	1    0    0    -1  
$EndComp
$Comp
L Device:C_Small C2
U 1 1 61592803
P 1550 1700
F 0 "C2" H 1400 1775 50  0000 L CNN
F 1 "100n 16V" H 1100 1625 50  0000 L CNN
F 2 "" H 1550 1700 50  0001 C CNN
F 3 "~" H 1550 1700 50  0001 C CNN
	1    1550 1700
	1    0    0    -1  
$EndComp
Wire Wire Line
	1550 1600 1550 1500
Wire Wire Line
	1550 1500 1675 1500
Wire Wire Line
	2325 1500 2450 1500
Wire Wire Line
	2450 1500 2450 1600
Wire Wire Line
	1550 1800 1550 1900
Wire Wire Line
	1550 1900 2000 1900
Wire Wire Line
	2450 1900 2450 1800
Wire Wire Line
	2000 1800 2000 1900
Connection ~ 2000 1900
Wire Wire Line
	2000 1900 2450 1900
Wire Wire Line
	8375 5100 8375 5200
Connection ~ 8375 5200
Wire Wire Line
	8375 5200 8375 5275
$Comp
L power:GNDD #PWR05
U 1 1 615A9FCE
P 2000 1950
F 0 "#PWR05" H 2000 1700 50  0001 C CNN
F 1 "GNDD" H 2004 1795 50  0000 C CNN
F 2 "" H 2000 1950 50  0001 C CNN
F 3 "" H 2000 1950 50  0001 C CNN
	1    2000 1950
	1    0    0    -1  
$EndComp
Wire Wire Line
	2000 1900 2000 1950
$Comp
L power:+12V #PWR04
U 1 1 615B366B
P 1550 1300
F 0 "#PWR04" H 1550 1150 50  0001 C CNN
F 1 "+12V" H 1565 1473 50  0000 C CNN
F 2 "" H 1550 1300 50  0001 C CNN
F 3 "" H 1550 1300 50  0001 C CNN
	1    1550 1300
	1    0    0    -1  
$EndComp
Wire Wire Line
	1550 1300 1550 1500
Connection ~ 1550 1500
$Comp
L power:+5V #PWR07
U 1 1 615B65BD
P 2450 1300
F 0 "#PWR07" H 2450 1150 50  0001 C CNN
F 1 "+5V" H 2465 1473 50  0000 C CNN
F 2 "" H 2450 1300 50  0001 C CNN
F 3 "" H 2450 1300 50  0001 C CNN
	1    2450 1300
	1    0    0    -1  
$EndComp
Wire Wire Line
	2450 1300 2450 1500
Connection ~ 2450 1500
$Comp
L Device:C_Small C1
U 1 1 615DA83F
P 975 1575
F 0 "C1" H 825 1650 50  0000 L CNN
F 1 "100u 50V" H 575 1500 50  0000 L CNN
F 2 "" H 975 1575 50  0001 C CNN
F 3 "~" H 975 1575 50  0001 C CNN
	1    975  1575
	1    0    0    -1  
$EndComp
$Comp
L power:+12V #PWR01
U 1 1 615DA84D
P 975 1300
F 0 "#PWR01" H 975 1150 50  0001 C CNN
F 1 "+12V" H 990 1473 50  0000 C CNN
F 2 "" H 975 1300 50  0001 C CNN
F 3 "" H 975 1300 50  0001 C CNN
	1    975  1300
	1    0    0    -1  
$EndComp
Wire Wire Line
	975  1300 975  1475
$Comp
L power:GND #PWR02
U 1 1 615E8453
P 975 1925
F 0 "#PWR02" H 975 1675 50  0001 C CNN
F 1 "GND" H 975 1750 50  0000 C CNN
F 2 "" H 975 1925 50  0001 C CNN
F 3 "" H 975 1925 50  0001 C CNN
	1    975  1925
	1    0    0    -1  
$EndComp
Wire Wire Line
	975  1675 975  1925
$Comp
L Device:Opamp_Dual_Generic U2
U 1 1 61640CC8
P 2750 6850
F 0 "U2" H 2750 6483 50  0000 C CNN
F 1 "LM7322" H 2750 6574 50  0000 C CNN
F 2 "" H 2750 6850 50  0001 C CNN
F 3 "~" H 2750 6850 50  0001 C CNN
	1    2750 6850
	1    0    0    1   
$EndComp
$Comp
L Device:Opamp_Dual_Generic U2
U 2 1 616417B3
P 4500 6750
F 0 "U2" H 4500 6383 50  0000 C CNN
F 1 "LM7322" H 4500 6474 50  0000 C CNN
F 2 "" H 4500 6750 50  0001 C CNN
F 3 "~" H 4500 6750 50  0001 C CNN
	2    4500 6750
	1    0    0    1   
$EndComp
$Comp
L Device:Opamp_Dual_Generic U2
U 3 1 61642627
P 1475 6600
F 0 "U2" V 1570 6600 50  0000 C CNN
F 1 "LM7322" V 1479 6600 50  0000 C CNN
F 2 "" H 1475 6600 50  0001 C CNN
F 3 "~" H 1475 6600 50  0001 C CNN
	3    1475 6600
	0    -1   -1   0   
$EndComp
$Comp
L power:GNDD #PWR?
U 1 1 616526D5
P 1825 7025
F 0 "#PWR?" H 1825 6775 50  0001 C CNN
F 1 "GNDD" H 1829 6870 50  0000 C CNN
F 2 "" H 1825 7025 50  0001 C CNN
F 3 "" H 1825 7025 50  0001 C CNN
	1    1825 7025
	1    0    0    -1  
$EndComp
$Comp
L power:GNDD #PWR?
U 1 1 61660037
P 1100 7025
F 0 "#PWR?" H 1100 6775 50  0001 C CNN
F 1 "GNDD" H 1104 6870 50  0000 C CNN
F 2 "" H 1100 7025 50  0001 C CNN
F 3 "" H 1100 7025 50  0001 C CNN
	1    1100 7025
	1    0    0    -1  
$EndComp
$Comp
L Device:C_Small C?
U 1 1 61661717
P 1100 6875
F 0 "C?" H 1275 6875 50  0000 R CNN
F 1 "0.1u 16V" H 1525 6975 50  0000 R CNN
F 2 "" H 1100 6875 50  0001 C CNN
F 3 "~" H 1100 6875 50  0001 C CNN
	1    1100 6875
	1    0    0    1   
$EndComp
Wire Wire Line
	1100 6975 1100 7025
$Comp
L power:+5V #PWR?
U 1 1 6166BF8C
P 1100 6500
F 0 "#PWR?" H 1100 6350 50  0001 C CNN
F 1 "+5V" H 1115 6673 50  0000 C CNN
F 2 "" H 1100 6500 50  0001 C CNN
F 3 "" H 1100 6500 50  0001 C CNN
	1    1100 6500
	1    0    0    -1  
$EndComp
Wire Wire Line
	1175 6700 1100 6700
Wire Wire Line
	1100 6700 1100 6775
Wire Wire Line
	1100 6500 1100 6700
Connection ~ 1100 6700
Wire Wire Line
	1775 6700 1825 6700
Wire Wire Line
	1825 6700 1825 7025
Text GLabel 10325 2875 1    50   Input ~ 0
V_load
$Comp
L Diode:1N4148W D?
U 1 1 616A906E
P 3250 6850
F 0 "D?" H 3250 6633 50  0000 C CNN
F 1 "1N4148W" H 3250 6724 50  0000 C CNN
F 2 "Diode_SMD:D_SOD-123" H 3250 6675 50  0001 C CNN
F 3 "https://www.vishay.com/docs/85748/1n4148w.pdf" H 3250 6850 50  0001 C CNN
	1    3250 6850
	-1   0    0    1   
$EndComp
Wire Wire Line
	3050 6850 3100 6850
Wire Wire Line
	3400 6850 3475 6850
Wire Wire Line
	3475 6850 3475 6375
Wire Wire Line
	3475 6375 2375 6375
Wire Wire Line
	2375 6375 2375 6750
Wire Wire Line
	2375 6750 2450 6750
Connection ~ 3475 6850
$Comp
L Device:R_Small R?
U 1 1 616D94E8
P 3675 6850
F 0 "R?" V 3479 6850 50  0000 C CNN
F 1 "33" V 3570 6850 50  0000 C CNN
F 2 "" H 3675 6850 50  0001 C CNN
F 3 "~" H 3675 6850 50  0001 C CNN
	1    3675 6850
	0    1    1    0   
$EndComp
Wire Wire Line
	3475 6850 3575 6850
$Comp
L Device:C_Small C?
U 1 1 616E1E84
P 3850 7050
F 0 "C?" H 3750 7125 50  0000 R CNN
F 1 "10n 16V" H 3800 7200 50  0000 R CNN
F 2 "" H 3850 7050 50  0001 C CNN
F 3 "~" H 3850 7050 50  0001 C CNN
	1    3850 7050
	1    0    0    1   
$EndComp
Wire Wire Line
	3775 6850 3850 6850
Wire Wire Line
	3850 6850 3850 6950
$Comp
L power:GNDD #PWR?
U 1 1 616EBE0D
P 4000 7350
F 0 "#PWR?" H 4000 7100 50  0001 C CNN
F 1 "GNDD" H 4004 7195 50  0000 C CNN
F 2 "" H 4000 7350 50  0001 C CNN
F 3 "" H 4000 7350 50  0001 C CNN
	1    4000 7350
	1    0    0    -1  
$EndComp
$Comp
L Device:R_Small R?
U 1 1 616F0891
P 4125 7050
F 0 "R?" H 4025 7125 50  0000 C CNN
F 1 "1M" H 4025 7025 50  0000 C CNN
F 2 "" H 4125 7050 50  0001 C CNN
F 3 "~" H 4125 7050 50  0001 C CNN
	1    4125 7050
	-1   0    0    1   
$EndComp
Wire Wire Line
	4125 6850 4125 6950
Wire Wire Line
	3850 7150 3850 7250
Wire Wire Line
	3850 7250 4000 7250
Wire Wire Line
	4125 7250 4125 7150
Wire Wire Line
	4000 7350 4000 7250
Connection ~ 4000 7250
Wire Wire Line
	4000 7250 4125 7250
Wire Wire Line
	4800 6750 4875 6750
Wire Wire Line
	4875 6750 4875 6250
Wire Wire Line
	4875 6250 4125 6250
Wire Wire Line
	4125 6250 4125 6650
Wire Wire Line
	4125 6650 4200 6650
Wire Wire Line
	4875 6750 4975 6750
Connection ~ 4875 6750
Connection ~ 3850 6850
Wire Wire Line
	3850 6850 4125 6850
Wire Wire Line
	4125 6850 4200 6850
Connection ~ 4125 6850
Wire Wire Line
	2450 6950 2400 6950
Text GLabel 2400 6950 0    50   Input ~ 0
Sense_out
Text GLabel 4975 6750 2    50   Input ~ 0
Pk_voltage
Text GLabel 4025 5050 0    50   Input ~ 0
Sense_out
$Comp
L Device:R_Small R?
U 1 1 6179FB42
P 4275 5050
F 0 "R?" V 4200 5050 50  0000 C CNN
F 1 "16k" V 4375 5050 50  0000 C CNN
F 2 "" H 4275 5050 50  0001 C CNN
F 3 "~" H 4275 5050 50  0001 C CNN
	1    4275 5050
	0    1    1    0   
$EndComp
$Comp
L Device:C_Small C?
U 1 1 617A0393
P 4525 5200
F 0 "C?" H 4700 5200 50  0000 R CNN
F 1 "1u 16V" H 4875 5300 50  0000 R CNN
F 2 "" H 4525 5200 50  0001 C CNN
F 3 "~" H 4525 5200 50  0001 C CNN
	1    4525 5200
	1    0    0    1   
$EndComp
Wire Wire Line
	4025 5050 4175 5050
Wire Wire Line
	4375 5050 4525 5050
Wire Wire Line
	4525 5050 4525 5100
$Comp
L power:GNDD #PWR?
U 1 1 617B133A
P 4525 5350
F 0 "#PWR?" H 4525 5100 50  0001 C CNN
F 1 "GNDD" H 4529 5195 50  0000 C CNN
F 2 "" H 4525 5350 50  0001 C CNN
F 3 "" H 4525 5350 50  0001 C CNN
	1    4525 5350
	1    0    0    -1  
$EndComp
Wire Wire Line
	4525 5300 4525 5350
Wire Wire Line
	4525 5050 4725 5050
Connection ~ 4525 5050
Text GLabel 4725 5050 2    50   Input ~ 0
Avg_voltage
Text Notes 3775 4850 0    50   ~ 0
First order passive low pass filter\nOutputs the average ripple voltage\n10Hz cutoff frequency
Text Notes 2375 6200 0    50   ~ 0
Ripple peak voltage detector.\nOutputs the ripple peak voltage
Text Notes 825  4400 0    50   ~ 0
Current shunt voltage amplifier\nVoltage Gain = 50\nShunt Resistance 60mOhms
Text Notes 800  875  0    50   ~ 0
Supply voltage reservoir and 5V LDO
$EndSCHEMATC
