EESchema Schematic File Version 4
EELAYER 30 0
EELAYER END
$Descr A4 11693 8268
encoding utf-8
Sheet 1 2
Title ""
Date ""
Rev ""
Comp ""
Comment1 ""
Comment2 ""
Comment3 ""
Comment4 ""
$EndDescr
$Comp
L power:+12V #PWR025
U 1 1 6136E82D
P 6250 3125
F 0 "#PWR025" H 6250 2975 50  0001 C CNN
F 1 "+12V" H 6265 3298 50  0000 C CNN
F 2 "" H 6250 3125 50  0001 C CNN
F 3 "" H 6250 3125 50  0001 C CNN
	1    6250 3125
	1    0    0    -1  
$EndComp
$Comp
L Device:Q_NMOS_GDS Q1
U 1 1 61370C87
P 6150 3475
F 0 "Q1" H 6354 3521 50  0000 L CNN
F 1 "NMOS" H 6354 3430 50  0000 L CNN
F 2 "Package_TO_SOT_THT:TO-220-3_Vertical" H 6350 3575 50  0001 C CNN
F 3 "~" H 6150 3475 50  0001 C CNN
	1    6150 3475
	1    0    0    -1  
$EndComp
Wire Wire Line
	6250 3125 6250 3275
$Comp
L Device:D_Schottky D3
U 1 1 61372223
P 6250 4075
F 0 "D3" V 6204 4155 50  0000 L CNN
F 1 "D_Schottky" V 6295 4155 50  0000 L CNN
F 2 "Diode_THT:D_A-405_P7.62mm_Horizontal" H 6250 4075 50  0001 C CNN
F 3 "~" H 6250 4075 50  0001 C CNN
	1    6250 4075
	0    1    1    0   
$EndComp
$Comp
L power:GND #PWR026
U 1 1 613736F3
P 6250 4325
F 0 "#PWR026" H 6250 4075 50  0001 C CNN
F 1 "GND" H 6255 4152 50  0000 C CNN
F 2 "" H 6250 4325 50  0001 C CNN
F 3 "" H 6250 4325 50  0001 C CNN
	1    6250 4325
	1    0    0    -1  
$EndComp
$Comp
L Device:L L1
U 1 1 61375946
P 6550 3875
F 0 "L1" V 6740 3875 50  0000 C CNN
F 1 "L" V 6649 3875 50  0000 C CNN
F 2 "IND_HCTI-150-5.0:IND_HCTI-150-5.0" H 6550 3875 50  0001 C CNN
F 3 "~" H 6550 3875 50  0001 C CNN
	1    6550 3875
	0    -1   -1   0   
$EndComp
Wire Wire Line
	6400 3875 6250 3875
Wire Wire Line
	6250 3875 6250 3925
Wire Wire Line
	7225 3875 7225 3925
Wire Wire Line
	7225 4225 7225 4275
Wire Wire Line
	7225 3875 7600 3875
Connection ~ 7225 3875
Wire Wire Line
	7600 4275 7225 4275
Connection ~ 7225 4275
Text GLabel 7650 3525 2    50   Input ~ 0
V_load
$Comp
L Device:R_Small R11
U 1 1 6137AA0B
P 9750 1200
F 0 "R11" H 9809 1246 50  0000 L CNN
F 1 "56k" H 9809 1155 50  0000 L CNN
F 2 "Resistor_SMD:R_0603_1608Metric_Pad0.98x0.95mm_HandSolder" H 9750 1200 50  0001 C CNN
F 3 "~" H 9750 1200 50  0001 C CNN
	1    9750 1200
	1    0    0    -1  
$EndComp
Wire Wire Line
	9750 975  9750 1100
$Comp
L Device:R_Small R12
U 1 1 6137C4E4
P 9750 1600
F 0 "R12" H 9809 1646 50  0000 L CNN
F 1 "22k" H 9809 1555 50  0000 L CNN
F 2 "Resistor_SMD:R_0603_1608Metric_Pad0.98x0.95mm_HandSolder" H 9750 1600 50  0001 C CNN
F 3 "~" H 9750 1600 50  0001 C CNN
	1    9750 1600
	1    0    0    -1  
$EndComp
$Comp
L power:GND #PWR031
U 1 1 6137CD28
P 9750 1800
F 0 "#PWR031" H 9750 1550 50  0001 C CNN
F 1 "GND" H 9755 1627 50  0000 C CNN
F 2 "" H 9750 1800 50  0001 C CNN
F 3 "" H 9750 1800 50  0001 C CNN
	1    9750 1800
	1    0    0    -1  
$EndComp
$Comp
L Device:R_Small R7
U 1 1 6137E635
P 8750 1200
F 0 "R7" H 8809 1246 50  0000 L CNN
F 1 "560k" H 8809 1155 50  0000 L CNN
F 2 "Resistor_SMD:R_0603_1608Metric_Pad0.98x0.95mm_HandSolder" H 8750 1200 50  0001 C CNN
F 3 "~" H 8750 1200 50  0001 C CNN
	1    8750 1200
	1    0    0    -1  
$EndComp
Wire Wire Line
	8750 975  8750 1100
Wire Wire Line
	8750 1300 8750 1400
$Comp
L power:+12V #PWR027
U 1 1 6137FB09
P 8750 975
F 0 "#PWR027" H 8750 825 50  0001 C CNN
F 1 "+12V" H 8765 1148 50  0000 C CNN
F 2 "" H 8750 975 50  0001 C CNN
F 3 "" H 8750 975 50  0001 C CNN
	1    8750 975 
	1    0    0    -1  
$EndComp
Text GLabel 9150 1400 2    50   Input ~ 0
V_supply
Wire Wire Line
	9150 1400 9075 1400
Connection ~ 8750 1400
Wire Wire Line
	8750 1400 8750 1500
$Comp
L Device:C_Small C15
U 1 1 61384302
P 9075 1600
F 0 "C15" H 9300 1600 50  0000 R CNN
F 1 "0.1u 16V" H 9500 1675 50  0000 R CNN
F 2 "Capacitor_SMD:C_0603_1608Metric_Pad1.08x0.95mm_HandSolder" H 9075 1600 50  0001 C CNN
F 3 "~" H 9075 1600 50  0001 C CNN
	1    9075 1600
	1    0    0    1   
$EndComp
$Comp
L power:GNDD #PWR032
U 1 1 61385013
P 10075 1825
F 0 "#PWR032" H 10075 1575 50  0001 C CNN
F 1 "GNDD" H 10079 1670 50  0000 C CNN
F 2 "" H 10075 1825 50  0001 C CNN
F 3 "" H 10075 1825 50  0001 C CNN
	1    10075 1825
	1    0    0    -1  
$EndComp
Text GLabel 10150 1400 2    50   Input ~ 0
load_sense
Wire Wire Line
	6250 4225 6250 4275
Wire Wire Line
	6250 4275 7225 4275
Connection ~ 6250 4275
Wire Wire Line
	6250 4275 6250 4325
$Comp
L Device:R_Small R10
U 1 1 6138FA43
P 7000 3875
F 0 "R10" V 6804 3875 50  0000 C CNN
F 1 "60m" V 6895 3875 50  0000 C CNN
F 2 "Resistor_SMD:R_2512_6332Metric_Pad1.52x3.35mm_HandSolder" H 7000 3875 50  0001 C CNN
F 3 "~" H 7000 3875 50  0001 C CNN
	1    7000 3875
	0    1    1    0   
$EndComp
Wire Wire Line
	7100 3875 7225 3875
Wire Wire Line
	6700 3875 6800 3875
Connection ~ 6800 3875
Wire Wire Line
	6800 3875 6900 3875
Wire Wire Line
	7225 3875 7225 3525
$Comp
L Device:D_Schottky D2
U 1 1 613BB138
P 4850 3000
F 0 "D2" H 4850 2783 50  0000 C CNN
F 1 "D_Schottky" H 4850 2874 50  0000 C CNN
F 2 "Diode_THT:D_A-405_P7.62mm_Horizontal" H 4850 3000 50  0001 C CNN
F 3 "~" H 4850 3000 50  0001 C CNN
	1    4850 3000
	-1   0    0    1   
$EndComp
$Comp
L Device:R_Small R6
U 1 1 613B85E8
P 5825 3475
F 0 "R6" V 5675 3475 50  0000 C CNN
F 1 "10" V 5750 3475 50  0000 C CNN
F 2 "Resistor_SMD:R_0603_1608Metric_Pad0.98x0.95mm_HandSolder" H 5825 3475 50  0001 C CNN
F 3 "~" H 5825 3475 50  0001 C CNN
	1    5825 3475
	0    1    1    0   
$EndComp
Wire Wire Line
	5375 3375 5375 3000
Wire Wire Line
	5375 3000 5000 3000
Wire Wire Line
	4700 3000 4400 3000
Wire Wire Line
	4400 3000 4400 3375
Wire Wire Line
	4400 3375 4525 3375
Connection ~ 5375 3375
Wire Wire Line
	5375 3575 5375 3675
NoConn ~ 4525 3575
$Comp
L Device:CP_Small C12
U 1 1 613DFD54
P 5375 3475
F 0 "C12" H 5400 3550 50  0000 L CNN
F 1 "10u 50V" H 5400 3400 50  0000 L CNN
F 2 "Capacitor_THT:CP_Radial_D5.0mm_P2.00mm" H 5375 3475 50  0001 C CNN
F 3 "~" H 5375 3475 50  0001 C CNN
F 4 "860010672009" H 5375 3475 50  0001 C CNN "Part Number"
	1    5375 3475
	1    0    0    -1  
$EndComp
$Comp
L power:GND #PWR023
U 1 1 613DE17F
P 4400 3900
F 0 "#PWR023" H 4400 3650 50  0001 C CNN
F 1 "GND" H 4405 3727 50  0000 C CNN
F 2 "" H 4400 3900 50  0001 C CNN
F 3 "" H 4400 3900 50  0001 C CNN
	1    4400 3900
	1    0    0    -1  
$EndComp
Connection ~ 4400 3375
$Comp
L IR2125:IR2125 U7
U 1 1 613ACD65
P 4875 3575
F 0 "U7" H 4875 4040 50  0000 C CNN
F 1 "IR2125" H 4875 3949 50  0000 C CNN
F 2 "Package_DIP:DIP-8_W7.62mm" H 4825 3725 50  0001 C CNN
F 3 "" H 4825 3725 50  0001 C CNN
	1    4875 3575
	1    0    0    -1  
$EndComp
Text GLabel 4225 3475 0    50   Input ~ 0
PWM
Wire Wire Line
	4225 3475 4525 3475
Wire Wire Line
	5925 3475 5950 3475
Wire Wire Line
	6250 3675 6250 3875
Connection ~ 6250 3875
$Comp
L Device:CP_Small C11
U 1 1 613E072A
P 4400 3475
F 0 "C11" H 4350 3400 50  0000 R CNN
F 1 "10u 50V" H 4375 3575 50  0000 R CNN
F 2 "Capacitor_THT:CP_Radial_D5.0mm_P2.00mm" H 4400 3475 50  0001 C CNN
F 3 "~" H 4400 3475 50  0001 C CNN
F 4 "860010672009" H 4400 3475 50  0001 C CNN "Part Number"
	1    4400 3475
	1    0    0    -1  
$EndComp
Wire Wire Line
	4400 3575 4400 3675
Connection ~ 4400 3675
Wire Wire Line
	4525 3675 4400 3675
Wire Wire Line
	4400 3675 4400 3900
Wire Wire Line
	5175 3675 5250 3675
Wire Wire Line
	5175 3575 5250 3575
Wire Wire Line
	5250 3575 5250 3675
Connection ~ 5250 3675
Wire Wire Line
	5250 3675 5375 3675
Wire Wire Line
	5175 3375 5375 3375
$Comp
L power:+12V #PWR022
U 1 1 614D1067
P 4400 2950
F 0 "#PWR022" H 4400 2800 50  0001 C CNN
F 1 "+12V" H 4415 3123 50  0000 C CNN
F 2 "" H 4400 2950 50  0001 C CNN
F 3 "" H 4400 2950 50  0001 C CNN
	1    4400 2950
	1    0    0    -1  
$EndComp
Wire Wire Line
	4400 2950 4400 3000
Connection ~ 4400 3000
Wire Wire Line
	5175 3475 5725 3475
$Comp
L Device:CP C16
U 1 1 614EA6E8
P 7225 4075
F 0 "C16" H 6975 4075 50  0000 L CNN
F 1 "470u 50V" H 6825 3975 50  0000 L CNN
F 2 "multi_capacitor:multi_cap" H 7263 3925 50  0001 C CNN
F 3 "~" H 7225 4075 50  0001 C CNN
	1    7225 4075
	1    0    0    -1  
$EndComp
Wire Wire Line
	7225 3525 7450 3525
Text Label 7450 3525 2    50   ~ 0
sen_n
Wire Wire Line
	6800 3875 6800 3525
Text Label 7025 3525 2    50   ~ 0
sen_p
Wire Wire Line
	6800 3525 7025 3525
$Comp
L Device:C_Small C3
U 1 1 615DA83F
P 950 1225
F 0 "C3" H 800 1300 50  0000 L CNN
F 1 "100u 50V" H 550 1150 50  0000 L CNN
F 2 "Capacitor_THT:CP_Radial_D10.0mm_P5.00mm" H 950 1225 50  0001 C CNN
F 3 "~" H 950 1225 50  0001 C CNN
F 4 "860010675020" H 950 1225 50  0001 C CNN "Part Number"
	1    950  1225
	1    0    0    -1  
$EndComp
$Comp
L power:+12V #PWR05
U 1 1 615DA84D
P 950 925
F 0 "#PWR05" H 950 775 50  0001 C CNN
F 1 "+12V" H 965 1098 50  0000 C CNN
F 2 "" H 950 925 50  0001 C CNN
F 3 "" H 950 925 50  0001 C CNN
	1    950  925 
	1    0    0    -1  
$EndComp
Wire Wire Line
	950  925  950  1025
$Comp
L power:GND #PWR06
U 1 1 615E8453
P 950 1550
F 0 "#PWR06" H 950 1300 50  0001 C CNN
F 1 "GND" H 950 1375 50  0000 C CNN
F 2 "" H 950 1550 50  0001 C CNN
F 3 "" H 950 1550 50  0001 C CNN
	1    950  1550
	1    0    0    -1  
$EndComp
Wire Wire Line
	950  1325 950  1425
$Comp
L Device:Opamp_Dual_Generic U2
U 3 1 61642627
P 1675 5775
F 0 "U2" V 1770 5775 50  0000 C CNN
F 1 "OPA2830" V 1679 5775 50  0000 C CNN
F 2 "Package_SO:SOIC-8_3.9x4.9mm_P1.27mm" H 1675 5775 50  0001 C CNN
F 3 "~" H 1675 5775 50  0001 C CNN
	3    1675 5775
	0    -1   -1   0   
$EndComp
$Comp
L power:GNDD #PWR011
U 1 1 616526D5
P 2025 6200
F 0 "#PWR011" H 2025 5950 50  0001 C CNN
F 1 "GNDD" H 2029 6045 50  0000 C CNN
F 2 "" H 2025 6200 50  0001 C CNN
F 3 "" H 2025 6200 50  0001 C CNN
	1    2025 6200
	1    0    0    -1  
$EndComp
$Comp
L power:GNDD #PWR08
U 1 1 61660037
P 1300 6200
F 0 "#PWR08" H 1300 5950 50  0001 C CNN
F 1 "GNDD" H 1304 6045 50  0000 C CNN
F 2 "" H 1300 6200 50  0001 C CNN
F 3 "" H 1300 6200 50  0001 C CNN
	1    1300 6200
	1    0    0    -1  
$EndComp
$Comp
L Device:C_Small C4
U 1 1 61661717
P 1300 6050
F 0 "C4" H 1475 6050 50  0000 R CNN
F 1 "0.1u 16V" H 1725 6150 50  0000 R CNN
F 2 "Capacitor_SMD:C_0603_1608Metric_Pad1.08x0.95mm_HandSolder" H 1300 6050 50  0001 C CNN
F 3 "~" H 1300 6050 50  0001 C CNN
	1    1300 6050
	1    0    0    1   
$EndComp
Wire Wire Line
	1300 6150 1300 6200
Wire Wire Line
	1375 5875 1300 5875
Wire Wire Line
	1300 5875 1300 5950
Wire Wire Line
	1300 5675 1300 5875
Connection ~ 1300 5875
Wire Wire Line
	1975 5875 2025 5875
Wire Wire Line
	2025 5875 2025 6200
Text GLabel 9750 975  1    50   Input ~ 0
V_load
Text Notes 2775 2325 0    59   ~ 0
Supply voltage (VCC) reservoir, 5V LDO, and VCC/2 refrence voltage with 10Hz low pass filter\n
Wire Wire Line
	9075 1825 9075 1700
Wire Wire Line
	9075 1500 9075 1400
Connection ~ 9075 1400
Wire Wire Line
	9075 1400 8750 1400
$Comp
L Device:R_Small R8
U 1 1 6137E641
P 8750 1600
F 0 "R8" H 8809 1646 50  0000 L CNN
F 1 "120k" H 8809 1555 50  0000 L CNN
F 2 "Resistor_SMD:R_0603_1608Metric_Pad0.98x0.95mm_HandSolder" H 8750 1600 50  0001 C CNN
F 3 "~" H 8750 1600 50  0001 C CNN
	1    8750 1600
	1    0    0    -1  
$EndComp
Wire Wire Line
	10150 1400 10075 1400
$Comp
L Device:C_Small C18
U 1 1 615661DB
P 10075 1600
F 0 "C18" H 10300 1600 50  0000 R CNN
F 1 "0.1u 16V" H 10500 1675 50  0000 R CNN
F 2 "Capacitor_SMD:C_0603_1608Metric_Pad1.08x0.95mm_HandSolder" H 10075 1600 50  0001 C CNN
F 3 "~" H 10075 1600 50  0001 C CNN
	1    10075 1600
	1    0    0    1   
$EndComp
Wire Wire Line
	10075 1500 10075 1400
Wire Wire Line
	9750 1300 9750 1400
Wire Wire Line
	10075 1400 9750 1400
Connection ~ 10075 1400
Connection ~ 9750 1400
Wire Wire Line
	9750 1400 9750 1500
$Comp
L power:GNDD #PWR030
U 1 1 615943DC
P 9075 1825
F 0 "#PWR030" H 9075 1575 50  0001 C CNN
F 1 "GNDD" H 9079 1670 50  0000 C CNN
F 2 "" H 9075 1825 50  0001 C CNN
F 3 "" H 9075 1825 50  0001 C CNN
	1    9075 1825
	1    0    0    -1  
$EndComp
Wire Wire Line
	9750 1700 9750 1800
Wire Wire Line
	10075 1700 10075 1825
$Comp
L power:+12V #PWR07
U 1 1 614CFEEF
P 1300 5675
F 0 "#PWR07" H 1300 5525 50  0001 C CNN
F 1 "+12V" H 1315 5848 50  0000 C CNN
F 2 "" H 1300 5675 50  0001 C CNN
F 3 "" H 1300 5675 50  0001 C CNN
	1    1300 5675
	1    0    0    -1  
$EndComp
$Comp
L power:+12V #PWR01
U 1 1 617C8E66
P 3750 950
F 0 "#PWR01" H 3750 800 50  0001 C CNN
F 1 "+12V" H 3765 1123 50  0000 C CNN
F 2 "" H 3750 950 50  0001 C CNN
F 3 "" H 3750 950 50  0001 C CNN
	1    3750 950 
	1    0    0    -1  
$EndComp
Wire Wire Line
	4475 1150 4475 1600
Wire Wire Line
	4425 1150 4475 1150
Connection ~ 3750 1150
Wire Wire Line
	3750 950  3750 1150
Wire Wire Line
	3750 1150 3750 1250
Wire Wire Line
	3825 1150 3750 1150
Wire Wire Line
	3750 1450 3750 1600
$Comp
L Device:C_Small C1
U 1 1 617C8E55
P 3750 1350
F 0 "C1" H 3925 1350 50  0000 R CNN
F 1 "0.1u 16V" H 4175 1450 50  0000 R CNN
F 2 "Capacitor_SMD:C_0603_1608Metric_Pad1.08x0.95mm_HandSolder" H 3750 1350 50  0001 C CNN
F 3 "~" H 3750 1350 50  0001 C CNN
	1    3750 1350
	1    0    0    1   
$EndComp
$Comp
L power:GNDD #PWR02
U 1 1 617C8E4B
P 3750 1600
F 0 "#PWR02" H 3750 1350 50  0001 C CNN
F 1 "GNDD" H 3754 1445 50  0000 C CNN
F 2 "" H 3750 1600 50  0001 C CNN
F 3 "" H 3750 1600 50  0001 C CNN
	1    3750 1600
	1    0    0    -1  
$EndComp
$Comp
L power:GNDD #PWR010
U 1 1 617C8E41
P 4475 1600
F 0 "#PWR010" H 4475 1350 50  0001 C CNN
F 1 "GNDD" H 4479 1445 50  0000 C CNN
F 2 "" H 4475 1600 50  0001 C CNN
F 3 "" H 4475 1600 50  0001 C CNN
	1    4475 1600
	1    0    0    -1  
$EndComp
Connection ~ 3025 1150
Wire Wire Line
	3025 950  3025 1150
$Comp
L power:+5V #PWR015
U 1 1 615B65BD
P 3025 950
F 0 "#PWR015" H 3025 800 50  0001 C CNN
F 1 "+5V" H 3040 1123 50  0000 C CNN
F 2 "" H 3025 950 50  0001 C CNN
F 3 "" H 3025 950 50  0001 C CNN
	1    3025 950 
	1    0    0    -1  
$EndComp
Connection ~ 2125 1150
Wire Wire Line
	2125 950  2125 1150
$Comp
L power:+12V #PWR09
U 1 1 615B366B
P 2125 950
F 0 "#PWR09" H 2125 800 50  0001 C CNN
F 1 "+12V" H 2140 1123 50  0000 C CNN
F 2 "" H 2125 950 50  0001 C CNN
F 3 "" H 2125 950 50  0001 C CNN
	1    2125 950 
	1    0    0    -1  
$EndComp
Wire Wire Line
	2575 1550 2575 1600
$Comp
L power:GNDD #PWR012
U 1 1 615A9FCE
P 2575 1600
F 0 "#PWR012" H 2575 1350 50  0001 C CNN
F 1 "GNDD" H 2579 1445 50  0000 C CNN
F 2 "" H 2575 1600 50  0001 C CNN
F 3 "" H 2575 1600 50  0001 C CNN
	1    2575 1600
	1    0    0    -1  
$EndComp
Wire Wire Line
	2575 1550 3025 1550
Connection ~ 2575 1550
Wire Wire Line
	2575 1450 2575 1550
Wire Wire Line
	3025 1550 3025 1450
Wire Wire Line
	2125 1550 2575 1550
Wire Wire Line
	2125 1450 2125 1550
Wire Wire Line
	3025 1150 3025 1250
Wire Wire Line
	2900 1150 3025 1150
Wire Wire Line
	2125 1150 2250 1150
Wire Wire Line
	2125 1250 2125 1150
$Comp
L Device:C_Small C5
U 1 1 61592803
P 2125 1350
F 0 "C5" H 1975 1425 50  0000 L CNN
F 1 "100n 16V" H 1750 1275 50  0000 L CNN
F 2 "Capacitor_SMD:C_0603_1608Metric_Pad1.08x0.95mm_HandSolder" H 2125 1350 50  0001 C CNN
F 3 "~" H 2125 1350 50  0001 C CNN
	1    2125 1350
	1    0    0    -1  
$EndComp
$Comp
L Device:C_Small C6
U 1 1 61590DD3
P 3025 1350
F 0 "C6" H 2875 1425 50  0000 L CNN
F 1 "10u 16V" H 2675 1275 50  0000 L CNN
F 2 "Capacitor_SMD:C_0805_2012Metric_Pad1.18x1.45mm_HandSolder" H 3025 1350 50  0001 C CNN
F 3 "~" H 3025 1350 50  0001 C CNN
	1    3025 1350
	1    0    0    -1  
$EndComp
Text GLabel 8150 1175 1    50   Input ~ 0
Avg_voltage
$Comp
L power:GNDD #PWR024
U 1 1 61B769A3
P 8150 1825
F 0 "#PWR024" H 8150 1575 50  0001 C CNN
F 1 "GNDD" H 8154 1670 50  0000 C CNN
F 2 "" H 8150 1825 50  0001 C CNN
F 3 "" H 8150 1825 50  0001 C CNN
	1    8150 1825
	1    0    0    -1  
$EndComp
$Comp
L Device:C_Small C13
U 1 1 61B76D37
P 8150 1500
F 0 "C13" H 8375 1500 50  0000 R CNN
F 1 "0.1u 16V" H 8575 1575 50  0000 R CNN
F 2 "Capacitor_SMD:C_0603_1608Metric_Pad1.08x0.95mm_HandSolder" H 8150 1500 50  0001 C CNN
F 3 "~" H 8150 1500 50  0001 C CNN
	1    8150 1500
	1    0    0    1   
$EndComp
Wire Wire Line
	8150 1600 8150 1825
Wire Wire Line
	8150 1175 8150 1400
$Comp
L LD1117V50:LD1117V50 U4
U 1 1 61501185
P 2575 1175
F 0 "U4" H 2575 1462 60  0000 C CNN
F 1 "LD1117V50" H 2575 1356 60  0000 C CNN
F 2 "Package_TO_SOT_THT:TO-220-3_Vertical" H 2575 1350 60  0001 C CNN
F 3 "https://www.st.com/content/ccc/resource/technical/document/datasheet/99/3b/7d/91/91/51/4b/be/CD00000544.pdf/files/CD00000544.pdf/jcr:content/translations/en.CD00000544.pdf" H 2200 1250 60  0001 C CNN
	1    2575 1175
	1    0    0    -1  
$EndComp
$Comp
L Device:Opamp_Quad_Generic U1
U 5 1 6161F132
P 4125 1250
F 0 "U1" V 3800 1250 50  0000 C CNN
F 1 "TLO84CN" V 3891 1250 50  0000 C CNN
F 2 "Package_DIP:DIP-14_W7.62mm" H 4125 1250 50  0001 C CNN
F 3 "~" H 4125 1250 50  0001 C CNN
	5    4125 1250
	0    1    1    0   
$EndComp
Wire Wire Line
	9000 2875 9125 2875
Text GLabel 9000 2875 0    50   Input ~ 0
Avg_voltage
NoConn ~ 9125 2475
Wire Wire Line
	9000 3375 9125 3375
Wire Wire Line
	9000 3275 9125 3275
Text GLabel 9000 3275 0    50   Input ~ 0
SCL
Text GLabel 9000 3375 0    50   Input ~ 0
SDA
Wire Wire Line
	9000 2675 9125 2675
Wire Wire Line
	9000 2775 9125 2775
Connection ~ 10975 3075
Wire Wire Line
	10975 2475 10975 3075
Wire Wire Line
	9000 3475 9125 3475
Text GLabel 9000 3475 0    50   Input ~ 0
PWM
Text GLabel 9000 2675 0    50   Input ~ 0
load_sense
NoConn ~ 10725 2575
NoConn ~ 10725 2675
NoConn ~ 10725 2775
NoConn ~ 10725 2875
NoConn ~ 10725 2975
NoConn ~ 10725 3175
NoConn ~ 10725 3275
NoConn ~ 10725 3375
NoConn ~ 10725 3475
NoConn ~ 10725 3575
NoConn ~ 10725 3675
NoConn ~ 10725 3775
NoConn ~ 10725 3875
NoConn ~ 10725 3975
NoConn ~ 10725 4075
NoConn ~ 10725 4175
NoConn ~ 10725 4275
NoConn ~ 9125 4175
NoConn ~ 9125 4075
NoConn ~ 9125 3975
NoConn ~ 9125 3875
NoConn ~ 9125 3675
NoConn ~ 9125 3575
NoConn ~ 9125 3175
NoConn ~ 9125 3075
NoConn ~ 9125 2975
Text GLabel 9000 2775 0    50   Input ~ 0
V_supply
NoConn ~ 9125 2575
Wire Wire Line
	8875 3775 9125 3775
Wire Wire Line
	8875 3825 8875 3775
$Comp
L power:GNDD #PWR017
U 1 1 61364069
P 8875 3825
F 0 "#PWR017" H 8875 3575 50  0001 C CNN
F 1 "GNDD" H 8879 3670 50  0000 C CNN
F 2 "" H 8875 3825 50  0001 C CNN
F 3 "" H 8875 3825 50  0001 C CNN
	1    8875 3825
	1    0    0    -1  
$EndComp
Wire Wire Line
	10975 3075 10975 3125
Wire Wire Line
	10725 3075 10975 3075
$Comp
L power:GNDD #PWR021
U 1 1 613620C9
P 10975 3125
F 0 "#PWR021" H 10975 2875 50  0001 C CNN
F 1 "GNDD" H 10979 2970 50  0000 C CNN
F 2 "" H 10975 3125 50  0001 C CNN
F 3 "" H 10975 3125 50  0001 C CNN
	1    10975 3125
	1    0    0    -1  
$EndComp
Wire Wire Line
	10725 2475 10975 2475
$Comp
L ESP32-DEVKITC-32D:ESP32-DEVKITC-32D U6
U 1 1 6135B32C
P 9925 3375
F 0 "U6" H 9925 4542 50  0000 C CNN
F 1 "ESP32-DEVKITC-32D" H 9925 4451 50  0000 C CNN
F 2 "MODULE_ESP32-DEVKITC-32D:MODULE_ESP32-DEVKITC-32D" H 9925 3375 50  0001 L BNN
F 3 "" H 9925 3375 50  0001 L BNN
F 4 "Espressif Systems" H 9925 3375 50  0001 L BNN "MANUFACTURER"
F 5 "4" H 9925 3375 50  0001 L BNN "PARTREV"
	1    9925 3375
	1    0    0    -1  
$EndComp
Wire Wire Line
	5375 3675 6250 3675
Connection ~ 5375 3675
Connection ~ 6250 3675
$Comp
L Device:R_Small R5
U 1 1 6179FB42
P 3825 7125
F 0 "R5" V 3750 7125 50  0000 C CNN
F 1 "16k" V 3925 7125 50  0000 C CNN
F 2 "Resistor_SMD:R_0603_1608Metric_Pad0.98x0.95mm_HandSolder" H 3825 7125 50  0001 C CNN
F 3 "~" H 3825 7125 50  0001 C CNN
F 4 "RR0816P-163-D" V 3825 7125 50  0001 C CNN "Part Number"
	1    3825 7125
	0    1    1    0   
$EndComp
$Comp
L Device:C_Small C10
U 1 1 617A0393
P 4075 7275
F 0 "C10" H 4300 7275 50  0000 R CNN
F 1 "1u 16V" H 4425 7375 50  0000 R CNN
F 2 "Capacitor_SMD:C_0603_1608Metric_Pad1.08x0.95mm_HandSolder" H 4075 7275 50  0001 C CNN
F 3 "~" H 4075 7275 50  0001 C CNN
	1    4075 7275
	1    0    0    1   
$EndComp
Wire Wire Line
	3575 7125 3725 7125
Wire Wire Line
	3925 7125 4075 7125
Wire Wire Line
	4075 7125 4075 7175
$Comp
L power:GNDD #PWR020
U 1 1 617B133A
P 4075 7425
F 0 "#PWR020" H 4075 7175 50  0001 C CNN
F 1 "GNDD" H 4079 7270 50  0000 C CNN
F 2 "" H 4075 7425 50  0001 C CNN
F 3 "" H 4075 7425 50  0001 C CNN
	1    4075 7425
	1    0    0    -1  
$EndComp
Wire Wire Line
	4075 7375 4075 7425
Wire Wire Line
	4075 7125 4275 7125
Connection ~ 4075 7125
Text GLabel 4275 7125 2    50   Input ~ 0
Avg_voltage
Text Notes 3400 6925 0    59   ~ 0
First order passive low pass filter\nOutputs the average ripple voltage\n10Hz cutoff frequency
Wire Wire Line
	9275 5475 9400 5475
Text GLabel 9275 5475 0    50   Input ~ 0
V_ref
Wire Wire Line
	9150 5675 9100 5675
Wire Wire Line
	9100 5675 9100 5700
$Comp
L power:GNDD #PWR029
U 1 1 616C8830
P 9100 5925
F 0 "#PWR029" H 9100 5675 50  0001 C CNN
F 1 "GNDD" H 9104 5770 50  0000 C CNN
F 2 "" H 9100 5925 50  0001 C CNN
F 3 "" H 9100 5925 50  0001 C CNN
	1    9100 5925
	1    0    0    -1  
$EndComp
Wire Wire Line
	9100 5900 9100 5925
Wire Wire Line
	9350 5675 9400 5675
$Comp
L Device:R_Small R9
U 1 1 616B1590
P 9250 5675
F 0 "R9" V 9175 5675 50  0000 C CNN
F 1 "2k" V 9325 5675 50  0000 C CNN
F 2 "Resistor_SMD:R_0603_1608Metric_Pad0.98x0.95mm_HandSolder" H 9250 5675 50  0001 C CNN
F 3 "~" H 9250 5675 50  0001 C CNN
F 4 "RR0816P-163-D" V 9250 5675 50  0001 C CNN "Part Number"
	1    9250 5675
	0    1    1    0   
$EndComp
$Comp
L Device:C_Small C14
U 1 1 616AE0ED
P 9100 5800
F 0 "C14" H 8850 5800 50  0000 L CNN
F 1 "0.1u 16V" H 8725 5725 50  0000 L CNN
F 2 "Capacitor_SMD:C_0603_1608Metric_Pad1.08x0.95mm_HandSolder" H 9100 5800 50  0001 C CNN
F 3 "~" H 9100 5800 50  0001 C CNN
	1    9100 5800
	1    0    0    -1  
$EndComp
Wire Wire Line
	9275 5375 9400 5375
Text GLabel 9275 5375 0    50   Input ~ 0
Pk_voltage
Wire Wire Line
	10050 5675 10150 5675
Wire Wire Line
	10050 5575 10150 5575
Wire Wire Line
	10550 5000 10550 5025
Wire Wire Line
	10050 5475 10250 5475
Text GLabel 10150 5675 2    50   Input ~ 0
SCL
Text GLabel 10150 5575 2    50   Input ~ 0
SDA
$Comp
L power:+5V #PWR033
U 1 1 615BB653
P 10550 5000
F 0 "#PWR033" H 10550 4850 50  0001 C CNN
F 1 "+5V" H 10565 5173 50  0000 C CNN
F 2 "" H 10550 5000 50  0001 C CNN
F 3 "" H 10550 5000 50  0001 C CNN
	1    10550 5000
	1    0    0    -1  
$EndComp
Connection ~ 10550 5275
Wire Wire Line
	10550 5225 10550 5275
Connection ~ 10250 5275
Wire Wire Line
	10150 5275 10250 5275
Wire Wire Line
	10150 5375 10150 5275
Wire Wire Line
	10050 5375 10150 5375
Connection ~ 10250 5475
Wire Wire Line
	10250 5475 10550 5475
Wire Wire Line
	10250 5275 10550 5275
$Comp
L Device:C_Small C19
U 1 1 6154A090
P 10550 5375
F 0 "C19" H 10625 5375 50  0000 L CNN
F 1 "4.7u 16V" H 10425 5225 50  0000 L CNN
F 2 "Capacitor_SMD:C_0603_1608Metric_Pad1.08x0.95mm_HandSolder" H 10550 5375 50  0001 C CNN
F 3 "~" H 10550 5375 50  0001 C CNN
	1    10550 5375
	1    0    0    -1  
$EndComp
$Comp
L Device:C_Small C17
U 1 1 61542A51
P 10250 5375
F 0 "C17" H 10325 5375 50  0000 L CNN
F 1 "0.1u 16V" H 10125 5550 50  0000 L CNN
F 2 "Capacitor_SMD:C_0603_1608Metric_Pad1.08x0.95mm_HandSolder" H 10250 5375 50  0001 C CNN
F 3 "~" H 10250 5375 50  0001 C CNN
	1    10250 5375
	1    0    0    -1  
$EndComp
$Comp
L Device:R_Small R14
U 1 1 6153CA4F
P 10550 5125
F 0 "R14" V 10354 5125 50  0000 C CNN
F 1 "5" V 10445 5125 50  0000 C CNN
F 2 "Resistor_SMD:R_0603_1608Metric_Pad0.98x0.95mm_HandSolder" H 10550 5125 50  0001 C CNN
F 3 "~" H 10550 5125 50  0001 C CNN
	1    10550 5125
	-1   0    0    1   
$EndComp
$Comp
L MAX11644:MAX11644 U8
U 1 1 61537D6B
P 9725 5525
F 0 "U8" H 9725 5940 50  0000 C CNN
F 1 "MAX11644" H 9725 5849 50  0000 C CNN
F 2 "Package_SO:MSOP-8_3x3mm_P0.65mm" H 9400 5900 50  0001 C CNN
F 3 "" H 9400 5900 50  0001 C CNN
	1    9725 5525
	1    0    0    -1  
$EndComp
$Comp
L Device:Opamp_Quad_Generic U1
U 1 1 6162967B
P 5600 1200
F 0 "U1" H 5600 850 50  0000 C CNN
F 1 "TLO84CN" H 5600 950 50  0000 C CNN
F 2 "Package_DIP:DIP-14_W7.62mm" H 5600 1200 50  0001 C CNN
F 3 "~" H 5600 1200 50  0001 C CNN
	1    5600 1200
	1    0    0    1   
$EndComp
Wire Wire Line
	6350 1500 6350 1600
Wire Wire Line
	6350 1200 6350 1300
$Comp
L power:GNDD #PWR016
U 1 1 6193F07B
P 6350 1600
F 0 "#PWR016" H 6350 1350 50  0001 C CNN
F 1 "GNDD" H 6354 1445 50  0000 C CNN
F 2 "" H 6350 1600 50  0001 C CNN
F 3 "" H 6350 1600 50  0001 C CNN
	1    6350 1600
	1    0    0    -1  
$EndComp
$Comp
L Device:C_Small C8
U 1 1 61934821
P 6350 1400
F 0 "C8" H 6525 1400 50  0000 R CNN
F 1 "1u 16V" H 6775 1500 50  0000 R CNN
F 2 "Capacitor_SMD:C_0603_1608Metric_Pad1.08x0.95mm_HandSolder" H 6350 1400 50  0001 C CNN
F 3 "~" H 6350 1400 50  0001 C CNN
	1    6350 1400
	1    0    0    1   
$EndComp
Text GLabel 6525 1200 2    50   Input ~ 0
V_ref
Wire Wire Line
	4950 1300 4950 1350
Connection ~ 4950 1300
Wire Wire Line
	5300 1300 4950 1300
Wire Wire Line
	5975 1200 5900 1200
Wire Wire Line
	5975 750  5975 1200
Wire Wire Line
	5200 750  5975 750 
Wire Wire Line
	5200 1100 5200 750 
Wire Wire Line
	5300 1100 5200 1100
Wire Wire Line
	4950 1250 4950 1300
$Comp
L Device:R_Small R2
U 1 1 614D2EB3
P 4950 1450
F 0 "R2" H 4800 1525 50  0000 L CNN
F 1 "100k" H 4725 1425 50  0000 L CNN
F 2 "Resistor_SMD:R_0603_1608Metric_Pad0.98x0.95mm_HandSolder" H 4950 1450 50  0001 C CNN
F 3 "~" H 4950 1450 50  0001 C CNN
	1    4950 1450
	1    0    0    -1  
$EndComp
$Comp
L power:GNDD #PWR014
U 1 1 614DC645
P 4950 1600
F 0 "#PWR014" H 4950 1350 50  0001 C CNN
F 1 "GNDD" H 4954 1445 50  0000 C CNN
F 2 "" H 4950 1600 50  0001 C CNN
F 3 "" H 4950 1600 50  0001 C CNN
	1    4950 1600
	1    0    0    -1  
$EndComp
Wire Wire Line
	4950 1550 4950 1600
$Comp
L power:+12V #PWR013
U 1 1 614D084A
P 4950 950
F 0 "#PWR013" H 4950 800 50  0001 C CNN
F 1 "+12V" H 4965 1123 50  0000 C CNN
F 2 "" H 4950 950 50  0001 C CNN
F 3 "" H 4950 950 50  0001 C CNN
	1    4950 950 
	1    0    0    -1  
$EndComp
Wire Wire Line
	4950 950  4950 1050
$Comp
L Device:R_Small R1
U 1 1 614FDB3E
P 4950 1150
F 0 "R1" H 4800 1225 50  0000 L CNN
F 1 "100k" H 4725 1125 50  0000 L CNN
F 2 "Resistor_SMD:R_0603_1608Metric_Pad0.98x0.95mm_HandSolder" H 4950 1150 50  0001 C CNN
F 3 "~" H 4950 1150 50  0001 C CNN
	1    4950 1150
	1    0    0    -1  
$EndComp
Wire Wire Line
	1025 4550 2075 4550
Connection ~ 1025 4550
Wire Wire Line
	1025 4625 1025 4550
Wire Wire Line
	2075 4250 2075 4550
Wire Wire Line
	1025 4500 1025 4550
Connection ~ 1025 4250
Wire Wire Line
	1025 4300 1025 4250
$Comp
L Device:C_Small C2
U 1 1 614BE6E3
P 1025 4400
F 0 "C2" H 925 4400 50  0000 R CNN
F 1 "0.1u 16V" H 950 4500 50  0000 R CNN
F 2 "Capacitor_SMD:C_0603_1608Metric_Pad1.08x0.95mm_HandSolder" H 1025 4400 50  0001 C CNN
F 3 "~" H 1025 4400 50  0001 C CNN
	1    1025 4400
	1    0    0    1   
$EndComp
Text Notes 550  2875 0    59   ~ 0
Current shunt voltage amplifier\nVoltage Gain Sense_avg = 50\nVoltage Gain Sense_ripple = 100\nShunt Resistance 60mOhms\n
Text Label 725  4150 0    50   ~ 0
sen_n
Text Label 725  4050 0    50   ~ 0
sen_p
Wire Wire Line
	1125 4150 725  4150
Wire Wire Line
	1125 4050 725  4050
$Comp
L power:GNDD #PWR04
U 1 1 6152F858
P 1025 4625
F 0 "#PWR04" H 1025 4375 50  0001 C CNN
F 1 "GNDD" H 1029 4470 50  0000 C CNN
F 2 "" H 1025 4625 50  0001 C CNN
F 3 "" H 1025 4625 50  0001 C CNN
	1    1025 4625
	1    0    0    -1  
$EndComp
Wire Wire Line
	1025 3950 1025 4250
Connection ~ 1025 3950
Wire Wire Line
	1025 3750 1025 3950
Wire Wire Line
	1025 4250 1125 4250
Wire Wire Line
	1025 3950 1125 3950
$Comp
L power:+5V #PWR03
U 1 1 6153D27E
P 1025 3750
F 0 "#PWR03" H 1025 3600 50  0001 C CNN
F 1 "+5V" H 1040 3923 50  0000 C CNN
F 2 "" H 1025 3750 50  0001 C CNN
F 3 "" H 1025 3750 50  0001 C CNN
	1    1025 3750
	1    0    0    -1  
$EndComp
Text GLabel 3125 4325 2    50   Input ~ 0
Sense_avg
Connection ~ 2075 4250
Wire Wire Line
	2075 4150 2075 4250
Wire Wire Line
	2025 4150 2075 4150
Wire Wire Line
	2025 4250 2075 4250
NoConn ~ 2025 3950
$Comp
L LT1999-50:LT1999MPMS8-50-PBF U3
U 1 1 61526A78
P 1575 4100
F 0 "U3" H 1575 4575 60  0000 C CNN
F 1 "LT1999-50" H 1575 4475 60  0000 C CNN
F 2 "Package_SO:SOIC-8_3.9x4.9mm_P1.27mm" H 2200 4375 60  0001 C CNN
F 3 "" H 1575 4100 60  0000 C CNN
	1    1575 4100
	1    0    0    -1  
$EndComp
Wire Wire Line
	3050 3950 3050 3475
$Comp
L Device:R_Small R15
U 1 1 61574C4B
P 2175 3475
F 0 "R15" V 2025 3475 50  0000 C CNN
F 1 "10k" V 2100 3475 50  0000 C CNN
F 2 "Resistor_SMD:R_0603_1608Metric_Pad1.05x0.95mm_HandSolder" H 2175 3475 50  0001 C CNN
F 3 "~" H 2175 3475 50  0001 C CNN
F 4 "RR0816P-163-D" V 2175 3475 50  0001 C CNN "Part Number"
	1    2175 3475
	0    1    1    0   
$EndComp
$Comp
L Device:R_Small R16
U 1 1 61574C56
P 2675 3475
F 0 "R16" V 2525 3475 50  0000 C CNN
F 1 "10k" V 2600 3475 50  0000 C CNN
F 2 "Resistor_SMD:R_0603_1608Metric_Pad1.05x0.95mm_HandSolder" H 2675 3475 50  0001 C CNN
F 3 "~" H 2675 3475 50  0001 C CNN
F 4 "RR0816P-163-D" V 2675 3475 50  0001 C CNN "Part Number"
	1    2675 3475
	0    1    1    0   
$EndComp
Wire Wire Line
	3050 3475 2775 3475
Wire Wire Line
	2575 3475 2325 3475
Wire Wire Line
	2975 3950 3050 3950
Wire Wire Line
	2325 3850 2375 3850
$Comp
L Device:Opamp_Dual_Generic U2
U 2 1 615B5B1E
P 2675 3950
F 0 "U2" H 2675 3583 50  0000 C CNN
F 1 "OPA2830" H 2675 3674 50  0000 C CNN
F 2 "Package_SO:SOIC-8_3.9x4.9mm_P1.27mm" H 2675 3950 50  0001 C CNN
F 3 "~" H 2675 3950 50  0001 C CNN
	2    2675 3950
	1    0    0    1   
$EndComp
Text GLabel 3575 7125 0    50   Input ~ 0
Sense_avg
Text GLabel 3125 3950 2    50   Input ~ 0
Sense_ripple
Wire Wire Line
	3050 3950 3125 3950
Connection ~ 3050 3950
Wire Wire Line
	2200 4325 2200 4050
Wire Wire Line
	2200 4050 2375 4050
Wire Wire Line
	2025 4050 2200 4050
Connection ~ 2200 4050
Wire Wire Line
	2325 3475 2325 3850
$Comp
L power:GNDD #PWR0101
U 1 1 61823953
P 2000 3600
F 0 "#PWR0101" H 2000 3350 50  0001 C CNN
F 1 "GNDD" H 2004 3445 50  0000 C CNN
F 2 "" H 2000 3600 50  0001 C CNN
F 3 "" H 2000 3600 50  0001 C CNN
	1    2000 3600
	1    0    0    -1  
$EndComp
Wire Wire Line
	2275 3475 2325 3475
Connection ~ 2325 3475
Wire Wire Line
	2075 3475 2000 3475
Wire Wire Line
	2000 3475 2000 3600
Wire Wire Line
	3125 4325 2200 4325
Wire Wire Line
	5575 5475 6300 5475
$Comp
L Device:C_Small C9
U 1 1 616E1E84
P 5250 6200
F 0 "C9" H 5225 6125 50  0000 R CNN
F 1 "100n 16V" H 5225 6275 50  0000 R CNN
F 2 "Capacitor_SMD:C_0603_1608Metric_Pad1.08x0.95mm_HandSolder" H 5250 6200 50  0001 C CNN
F 3 "~" H 5250 6200 50  0001 C CNN
	1    5250 6200
	1    0    0    1   
$EndComp
Wire Wire Line
	5250 6300 5250 6400
Wire Wire Line
	5250 6000 5250 6100
Wire Wire Line
	5250 6400 5400 6400
Wire Wire Line
	5250 6000 5550 6000
Wire Wire Line
	5250 6000 4750 6000
Connection ~ 5250 6000
$Comp
L Device:R_Small R4
U 1 1 616F0891
P 5550 6200
F 0 "R4" H 5450 6275 50  0000 C CNN
F 1 "1M" H 5450 6175 50  0000 C CNN
F 2 "Resistor_SMD:R_0603_1608Metric_Pad0.98x0.95mm_HandSolder" H 5550 6200 50  0001 C CNN
F 3 "~" H 5550 6200 50  0001 C CNN
	1    5550 6200
	-1   0    0    1   
$EndComp
Wire Wire Line
	5550 6400 5550 6300
Wire Wire Line
	5550 6000 5550 6100
Wire Wire Line
	5400 6400 5550 6400
Connection ~ 5550 6000
Wire Wire Line
	5550 6000 5625 6000
$Comp
L power:GNDD #PWR019
U 1 1 616EBE0D
P 5400 6500
F 0 "#PWR019" H 5400 6250 50  0001 C CNN
F 1 "GNDD" H 5404 6345 50  0000 C CNN
F 2 "" H 5400 6500 50  0001 C CNN
F 3 "" H 5400 6500 50  0001 C CNN
	1    5400 6500
	1    0    0    -1  
$EndComp
Wire Wire Line
	5400 6500 5400 6400
Connection ~ 5400 6400
Wire Wire Line
	5575 5475 5575 5800
Wire Wire Line
	5575 5800 5625 5800
Text GLabel 6400 5900 2    50   Input ~ 0
Pk_voltage
Connection ~ 6300 5900
Wire Wire Line
	6300 5900 6400 5900
Wire Wire Line
	6225 5900 6300 5900
Wire Wire Line
	6300 5900 6300 5475
$Comp
L Device:Opamp_Quad_Generic U1
U 2 1 6162B04C
P 5925 5900
F 0 "U1" H 5925 5575 50  0000 C CNN
F 1 "TLO84CN" H 5925 5650 50  0000 C CNN
F 2 "Package_DIP:DIP-14_W7.62mm" H 5925 5900 50  0001 C CNN
F 3 "~" H 5925 5900 50  0001 C CNN
	2    5925 5900
	1    0    0    1   
$EndComp
NoConn ~ 4900 6150
$Comp
L Device:R_POT RV1
U 1 1 614FFFF3
P 4750 6150
F 0 "RV1" V 4635 6150 50  0000 C CNN
F 1 "100" V 4544 6150 50  0000 C CNN
F 2 "Potentiometer_THT:Potentiometer_Bourns_3266Y_Vertical" H 4750 6150 50  0001 C CNN
F 3 "~" H 4750 6150 50  0001 C CNN
	1    4750 6150
	0    -1   -1   0   
$EndComp
Wire Wire Line
	3300 5825 3300 5925
Text GLabel 3300 5825 1    50   Input ~ 0
V_ref
Wire Wire Line
	3300 6250 3575 6250
Connection ~ 3300 6250
Wire Wire Line
	3300 6125 3300 6250
$Comp
L Device:R_Small R3
U 1 1 6195B525
P 3300 6025
F 0 "R3" H 3100 6100 50  0000 L CNN
F 1 "10k" H 3100 6000 50  0000 L CNN
F 2 "Resistor_SMD:R_0603_1608Metric_Pad0.98x0.95mm_HandSolder" H 3300 6025 50  0001 C CNN
F 3 "~" H 3300 6025 50  0001 C CNN
	1    3300 6025
	1    0    0    -1  
$EndComp
Wire Wire Line
	3175 6250 3300 6250
Wire Wire Line
	2875 6250 2975 6250
$Comp
L Device:C_Small C7
U 1 1 614EAD80
P 3075 6250
F 0 "C7" V 3125 6200 50  0000 R CNN
F 1 "100u 16V" V 3200 6450 50  0000 R CNN
F 2 "Capacitor_THT:CP_Radial_D8.0mm_P3.50mm" H 3075 6250 50  0001 C CNN
F 3 "~" H 3075 6250 50  0001 C CNN
F 4 "860020374012" V 3075 6250 50  0001 C CNN "Part Number"
	1    3075 6250
	0    -1   1    0   
$EndComp
Text Notes 3400 5475 0    59   ~ 0
Ripple peak voltage detector.\nOutputs the ripple peak voltage
Text GLabel 2875 6250 0    50   Input ~ 0
Sense_ripple
Wire Wire Line
	4550 6150 4600 6150
Connection ~ 4550 6150
Wire Wire Line
	3525 6050 3575 6050
Wire Wire Line
	3525 5675 3525 6050
Wire Wire Line
	4550 5675 3525 5675
Wire Wire Line
	4550 6150 4550 5675
Wire Wire Line
	4500 6150 4550 6150
Wire Wire Line
	4175 6150 4200 6150
$Comp
L Diode:1N4148W D1
U 1 1 616A906E
P 4350 6150
F 0 "D1" H 4350 5933 50  0000 C CNN
F 1 "1N4148W" H 4350 6024 50  0000 C CNN
F 2 "Diode_THT:D_DO-35_SOD27_P7.62mm_Horizontal" H 4350 5975 50  0001 C CNN
F 3 "https://www.vishay.com/docs/85748/1n4148w.pdf" H 4350 6150 50  0001 C CNN
	1    4350 6150
	-1   0    0    1   
$EndComp
$Comp
L Device:Opamp_Dual_Generic U2
U 1 1 61640CC8
P 3875 6150
F 0 "U2" H 3875 5783 50  0000 C CNN
F 1 "OPA2830" H 3875 5874 50  0000 C CNN
F 2 "Package_SO:SOIC-8_3.9x4.9mm_P1.27mm" H 3875 6150 50  0001 C CNN
F 3 "~" H 3875 6150 50  0001 C CNN
	1    3875 6150
	1    0    0    1   
$EndComp
Wire Wire Line
	7650 3525 7600 3525
Wire Wire Line
	7600 3525 7600 3875
$Comp
L Mechanical:MountingHole_Pad H2
U 1 1 6194385E
P 1200 925
F 0 "H2" H 1300 974 50  0000 L CNN
F 1 "VCC_IN" H 1100 1100 50  0000 L CNN
F 2 "MountingHole:MountingHole_3.5mm_Pad_Via" H 1200 925 50  0001 C CNN
F 3 "~" H 1200 925 50  0001 C CNN
	1    1200 925 
	1    0    0    -1  
$EndComp
Wire Wire Line
	1200 1025 950  1025
Connection ~ 950  1025
Wire Wire Line
	950  1025 950  1125
$Comp
L Mechanical:MountingHole_Pad H1
U 1 1 6194FEB1
P 1175 1525
F 0 "H1" H 1075 1575 50  0000 R CNN
F 1 "GND_IN" H 1275 1725 50  0000 R CNN
F 2 "MountingHole:MountingHole_3.5mm_Pad_Via" H 1175 1525 50  0001 C CNN
F 3 "~" H 1175 1525 50  0001 C CNN
	1    1175 1525
	-1   0    0    1   
$EndComp
Wire Wire Line
	1175 1425 950  1425
Connection ~ 950  1425
Wire Wire Line
	950  1425 950  1550
$Comp
L Mechanical:MountingHole_Pad H3
U 1 1 6198A912
P 7700 3875
F 0 "H3" V 7575 3975 50  0000 R CNN
F 1 "LOAD +" V 7850 4125 50  0000 R CNN
F 2 "MountingHole:MountingHole_3.5mm_Pad_Via" H 7700 3875 50  0001 C CNN
F 3 "~" H 7700 3875 50  0001 C CNN
	1    7700 3875
	0    1    1    0   
$EndComp
Connection ~ 7600 3875
$Comp
L Mechanical:MountingHole_Pad H4
U 1 1 6198BF13
P 7700 4275
F 0 "H4" V 7575 4375 50  0000 R CNN
F 1 "LOAD -" V 7850 4525 50  0000 R CNN
F 2 "MountingHole:MountingHole_3.5mm_Pad_Via" H 7700 4275 50  0001 C CNN
F 3 "~" H 7700 4275 50  0001 C CNN
	1    7700 4275
	0    1    1    0   
$EndComp
Wire Wire Line
	8875 4250 8875 4275
Wire Wire Line
	8875 4275 9125 4275
$Comp
L power:+5V #PWR018
U 1 1 6155D00D
P 8875 4250
F 0 "#PWR018" H 8875 4100 50  0001 C CNN
F 1 "+5V" H 8890 4423 50  0000 C CNN
F 2 "" H 8875 4250 50  0001 C CNN
F 3 "" H 8875 4250 50  0001 C CNN
	1    8875 4250
	1    0    0    -1  
$EndComp
$Comp
L Device:Net-Tie_2 NT1
U 1 1 61615149
P 1050 2075
F 0 "NT1" H 1050 2256 50  0000 C CNN
F 1 "Net-Tie_2" H 1050 2165 50  0000 C CNN
F 2 "NetTie:NetTie-2_SMD_Pad2.0mm" H 1050 2075 50  0001 C CNN
F 3 "~" H 1050 2075 50  0001 C CNN
	1    1050 2075
	1    0    0    -1  
$EndComp
$Comp
L power:GND #PWR0102
U 1 1 61616520
P 825 2100
F 0 "#PWR0102" H 825 1850 50  0001 C CNN
F 1 "GND" H 825 1925 50  0000 C CNN
F 2 "" H 825 2100 50  0001 C CNN
F 3 "" H 825 2100 50  0001 C CNN
	1    825  2100
	1    0    0    -1  
$EndComp
$Comp
L power:GNDD #PWR0103
U 1 1 616168CA
P 1275 2100
F 0 "#PWR0103" H 1275 1850 50  0001 C CNN
F 1 "GNDD" H 1279 1945 50  0000 C CNN
F 2 "" H 1275 2100 50  0001 C CNN
F 3 "" H 1275 2100 50  0001 C CNN
	1    1275 2100
	1    0    0    -1  
$EndComp
Wire Wire Line
	950  2075 825  2075
Wire Wire Line
	825  2075 825  2100
Wire Wire Line
	1150 2075 1275 2075
Wire Wire Line
	1275 2075 1275 2100
$Comp
L Device:R_Small R13
U 1 1 6160E070
P 6150 1200
F 0 "R13" V 6075 1200 50  0000 C CNN
F 1 "16k" V 6250 1200 50  0000 C CNN
F 2 "Resistor_SMD:R_0603_1608Metric_Pad0.98x0.95mm_HandSolder" H 6150 1200 50  0001 C CNN
F 3 "~" H 6150 1200 50  0001 C CNN
F 4 "RR0816P-163-D" V 6150 1200 50  0001 C CNN "Part Number"
	1    6150 1200
	0    1    1    0   
$EndComp
Wire Wire Line
	5975 1200 6050 1200
Connection ~ 5975 1200
Wire Wire Line
	6250 1200 6350 1200
Wire Wire Line
	6350 1200 6525 1200
Connection ~ 6350 1200
$Comp
L power:GNDD #PWR?
U 1 1 616B9AA7
P 8750 1825
F 0 "#PWR?" H 8750 1575 50  0001 C CNN
F 1 "GNDD" H 8754 1670 50  0000 C CNN
F 2 "" H 8750 1825 50  0001 C CNN
F 3 "" H 8750 1825 50  0001 C CNN
	1    8750 1825
	1    0    0    -1  
$EndComp
Wire Wire Line
	8750 1700 8750 1825
Wire Notes Line
	7150 2400 7150 500 
Wire Notes Line
	11225 4625 8325 4625
Wire Notes Line
	8325 2400 475  2400
Text Notes 8950 4550 0    59   ~ 0
ESP32 pinout, and internal ADC filter capacitors
Wire Notes Line
	3825 2400 3825 5100
Wire Notes Line
	475  5100 8325 5100
Wire Notes Line
	8325 2400 8325 6525
Text Notes 9575 6450 0    59   ~ 0
12 Bit I2C Interface ADC\nOperating with differential inputs
Text Notes 3875 5100 0    79   ~ 0
Buck converter with atachable load\n3.3V compliant input high side N-channel gate driver\n 
$Sheet
S 12575 4050 500  150 
U 61589D03
F0 "test" 50
F1 "test.sch" 50
$EndSheet
$EndSCHEMATC
